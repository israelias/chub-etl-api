
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Resources - CheatHub DB/API Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#resources.auth" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="CheatHub DB/API Docs" class="md-header__button md-logo" aria-label="CheatHub DB/API Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CheatHub DB/API Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Resources
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="CheatHub DB/API Docs" class="md-nav__button md-logo" aria-label="CheatHub DB/API Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CheatHub DB/API Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome to MkDocs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../admin/" class="md-nav__link">
        Admin
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../database/" class="md-nav__link">
        Database
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Resources
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Resources
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#resources.auth" class="md-nav__link">
    resources.auth
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.auth.LoginApi" class="md-nav__link">
    LoginApi
  </a>
  
    <nav class="md-nav" aria-label="LoginApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.auth.LoginApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.auth.LogoutApi" class="md-nav__link">
    LogoutApi
  </a>
  
    <nav class="md-nav" aria-label="LogoutApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.auth.LogoutApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.auth.SignupApi" class="md-nav__link">
    SignupApi
  </a>
  
    <nav class="md-nav" aria-label="SignupApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.auth.SignupApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors" class="md-nav__link">
    resources.errors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.BadTokenError" class="md-nav__link">
    BadTokenError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.EmailAlreadyExistsError" class="md-nav__link">
    EmailAlreadyExistsError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.EmailDoesNotExistError" class="md-nav__link">
    EmailDoesNotExistError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.ExpiredTokenError" class="md-nav__link">
    ExpiredTokenError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.InternalServerError" class="md-nav__link">
    InternalServerError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.SchemaValidationError" class="md-nav__link">
    SchemaValidationError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.SnippetAlreadyExistsError" class="md-nav__link">
    SnippetAlreadyExistsError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.SnippetNotExistsError" class="md-nav__link">
    SnippetNotExistsError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.UnauthorizedError" class="md-nav__link">
    UnauthorizedError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.UpdatingSnippetError" class="md-nav__link">
    UpdatingSnippetError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.UserNotExistsError" class="md-nav__link">
    UserNotExistsError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.UsernameAlreadyExistsError" class="md-nav__link">
    UsernameAlreadyExistsError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.status" class="md-nav__link">
    resources.status
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.status.Status" class="md-nav__link">
    Status
  </a>
  
    <nav class="md-nav" aria-label="Status">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.status.Status.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.routes" class="md-nav__link">
    resources.routes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.routes.initialize_routes" class="md-nav__link">
    initialize_routes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.snippet" class="md-nav__link">
    resources.snippet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.snippet.LikeSnippetApi" class="md-nav__link">
    LikeSnippetApi
  </a>
  
    <nav class="md-nav" aria-label="LikeSnippetApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.snippet.LikeSnippetApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.snippet.SnippetApi" class="md-nav__link">
    SnippetApi
  </a>
  
    <nav class="md-nav" aria-label="SnippetApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.snippet.SnippetApi.delete" class="md-nav__link">
    delete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.snippet.SnippetApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.snippet.SnippetApi.put" class="md-nav__link">
    put()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.snippet.SnippetsApi" class="md-nav__link">
    SnippetsApi
  </a>
  
    <nav class="md-nav" aria-label="SnippetsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.snippet.SnippetsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.snippet.SnippetsApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.collection" class="md-nav__link">
    resources.collection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.collection.CollectionApi" class="md-nav__link">
    CollectionApi
  </a>
  
    <nav class="md-nav" aria-label="CollectionApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.collection.CollectionApi.delete" class="md-nav__link">
    delete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.collection.CollectionApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.collection.CollectionApi.put" class="md-nav__link">
    put()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.collection.CollectionsApi" class="md-nav__link">
    CollectionsApi
  </a>
  
    <nav class="md-nav" aria-label="CollectionsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.collection.CollectionsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.collection.CollectionsApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile" class="md-nav__link">
    resources.profile
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionApi" class="md-nav__link">
    MyCollectionApi
  </a>
  
    <nav class="md-nav" aria-label="MyCollectionApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionsApi" class="md-nav__link">
    MyCollectionsApi
  </a>
  
    <nav class="md-nav" aria-label="MyCollectionsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionsOptionsApi" class="md-nav__link">
    MyCollectionsOptionsApi
  </a>
  
    <nav class="md-nav" aria-label="MyCollectionsOptionsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionsOptionsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MyFaveSnippetsApi" class="md-nav__link">
    MyFaveSnippetsApi
  </a>
  
    <nav class="md-nav" aria-label="MyFaveSnippetsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MyFaveSnippetsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MySnippetsApi" class="md-nav__link">
    MySnippetsApi
  </a>
  
    <nav class="md-nav" aria-label="MySnippetsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MySnippetsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MySnippetsOptionsApi" class="md-nav__link">
    MySnippetsOptionsApi
  </a>
  
    <nav class="md-nav" aria-label="MySnippetsOptionsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MySnippetsOptionsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.user" class="md-nav__link">
    resources.user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.user.UserApi" class="md-nav__link">
    UserApi
  </a>
  
    <nav class="md-nav" aria-label="UserApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.user.UserApi.delete" class="md-nav__link">
    delete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.user.UserApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.user.UserApi.put" class="md-nav__link">
    put()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.user.UsersApi" class="md-nav__link">
    UsersApi
  </a>
  
    <nav class="md-nav" aria-label="UsersApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.user.UsersApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.reset_password" class="md-nav__link">
    resources.reset_password
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.reset_password.ForgotPassword" class="md-nav__link">
    ForgotPassword
  </a>
  
    <nav class="md-nav" aria-label="ForgotPassword">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.reset_password.ForgotPassword.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.reset_password.ResetPassword" class="md-nav__link">
    ResetPassword
  </a>
  
    <nav class="md-nav" aria-label="ResetPassword">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.reset_password.ResetPassword.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.tags" class="md-nav__link">
    resources.tags
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.tags.TagsApi" class="md-nav__link">
    TagsApi
  </a>
  
    <nav class="md-nav" aria-label="TagsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.tags.TagsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.search" class="md-nav__link">
    resources.search
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.search.SearchApi" class="md-nav__link">
    SearchApi
  </a>
  
    <nav class="md-nav" aria-label="SearchApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.search.SearchApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../services/" class="md-nav__link">
        Services
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#resources.auth" class="md-nav__link">
    resources.auth
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.auth.LoginApi" class="md-nav__link">
    LoginApi
  </a>
  
    <nav class="md-nav" aria-label="LoginApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.auth.LoginApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.auth.LogoutApi" class="md-nav__link">
    LogoutApi
  </a>
  
    <nav class="md-nav" aria-label="LogoutApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.auth.LogoutApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.auth.SignupApi" class="md-nav__link">
    SignupApi
  </a>
  
    <nav class="md-nav" aria-label="SignupApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.auth.SignupApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors" class="md-nav__link">
    resources.errors
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.BadTokenError" class="md-nav__link">
    BadTokenError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.EmailAlreadyExistsError" class="md-nav__link">
    EmailAlreadyExistsError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.EmailDoesNotExistError" class="md-nav__link">
    EmailDoesNotExistError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.ExpiredTokenError" class="md-nav__link">
    ExpiredTokenError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.InternalServerError" class="md-nav__link">
    InternalServerError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.SchemaValidationError" class="md-nav__link">
    SchemaValidationError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.SnippetAlreadyExistsError" class="md-nav__link">
    SnippetAlreadyExistsError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.SnippetNotExistsError" class="md-nav__link">
    SnippetNotExistsError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.UnauthorizedError" class="md-nav__link">
    UnauthorizedError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.UpdatingSnippetError" class="md-nav__link">
    UpdatingSnippetError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.UserNotExistsError" class="md-nav__link">
    UserNotExistsError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.errors.UsernameAlreadyExistsError" class="md-nav__link">
    UsernameAlreadyExistsError
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.status" class="md-nav__link">
    resources.status
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.status.Status" class="md-nav__link">
    Status
  </a>
  
    <nav class="md-nav" aria-label="Status">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.status.Status.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.routes" class="md-nav__link">
    resources.routes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.routes.initialize_routes" class="md-nav__link">
    initialize_routes()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.snippet" class="md-nav__link">
    resources.snippet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.snippet.LikeSnippetApi" class="md-nav__link">
    LikeSnippetApi
  </a>
  
    <nav class="md-nav" aria-label="LikeSnippetApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.snippet.LikeSnippetApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.snippet.SnippetApi" class="md-nav__link">
    SnippetApi
  </a>
  
    <nav class="md-nav" aria-label="SnippetApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.snippet.SnippetApi.delete" class="md-nav__link">
    delete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.snippet.SnippetApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.snippet.SnippetApi.put" class="md-nav__link">
    put()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.snippet.SnippetsApi" class="md-nav__link">
    SnippetsApi
  </a>
  
    <nav class="md-nav" aria-label="SnippetsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.snippet.SnippetsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.snippet.SnippetsApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.collection" class="md-nav__link">
    resources.collection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.collection.CollectionApi" class="md-nav__link">
    CollectionApi
  </a>
  
    <nav class="md-nav" aria-label="CollectionApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.collection.CollectionApi.delete" class="md-nav__link">
    delete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.collection.CollectionApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.collection.CollectionApi.put" class="md-nav__link">
    put()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.collection.CollectionsApi" class="md-nav__link">
    CollectionsApi
  </a>
  
    <nav class="md-nav" aria-label="CollectionsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.collection.CollectionsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.collection.CollectionsApi.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile" class="md-nav__link">
    resources.profile
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionApi" class="md-nav__link">
    MyCollectionApi
  </a>
  
    <nav class="md-nav" aria-label="MyCollectionApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionsApi" class="md-nav__link">
    MyCollectionsApi
  </a>
  
    <nav class="md-nav" aria-label="MyCollectionsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionsOptionsApi" class="md-nav__link">
    MyCollectionsOptionsApi
  </a>
  
    <nav class="md-nav" aria-label="MyCollectionsOptionsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MyCollectionsOptionsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MyFaveSnippetsApi" class="md-nav__link">
    MyFaveSnippetsApi
  </a>
  
    <nav class="md-nav" aria-label="MyFaveSnippetsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MyFaveSnippetsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MySnippetsApi" class="md-nav__link">
    MySnippetsApi
  </a>
  
    <nav class="md-nav" aria-label="MySnippetsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MySnippetsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.profile.MySnippetsOptionsApi" class="md-nav__link">
    MySnippetsOptionsApi
  </a>
  
    <nav class="md-nav" aria-label="MySnippetsOptionsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.profile.MySnippetsOptionsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.user" class="md-nav__link">
    resources.user
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.user.UserApi" class="md-nav__link">
    UserApi
  </a>
  
    <nav class="md-nav" aria-label="UserApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.user.UserApi.delete" class="md-nav__link">
    delete()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.user.UserApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resources.user.UserApi.put" class="md-nav__link">
    put()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.user.UsersApi" class="md-nav__link">
    UsersApi
  </a>
  
    <nav class="md-nav" aria-label="UsersApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.user.UsersApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.reset_password" class="md-nav__link">
    resources.reset_password
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.reset_password.ForgotPassword" class="md-nav__link">
    ForgotPassword
  </a>
  
    <nav class="md-nav" aria-label="ForgotPassword">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.reset_password.ForgotPassword.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.reset_password.ResetPassword" class="md-nav__link">
    ResetPassword
  </a>
  
    <nav class="md-nav" aria-label="ResetPassword">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.reset_password.ResetPassword.post" class="md-nav__link">
    post()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.tags" class="md-nav__link">
    resources.tags
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.tags.TagsApi" class="md-nav__link">
    TagsApi
  </a>
  
    <nav class="md-nav" aria-label="TagsApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.tags.TagsApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.search" class="md-nav__link">
    resources.search
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources.search.SearchApi" class="md-nav__link">
    SearchApi
  </a>
  
    <nav class="md-nav" aria-label="SearchApi">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resources.search.SearchApi.get" class="md-nav__link">
    get()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Resources</h1>

<div class="doc doc-object doc-module">


<a id="resources.auth"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="resources.auth.LoginApi" class="doc doc-heading">
        <code>LoginApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>This class is a subclass of the Resource class from the Flask-RESTful library. It handles requests against the
Snippet model to <code>api/auth/login</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/auth.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LoginApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class is a subclass of the Resource class from the Flask-RESTful library. It handles requests against the</span>
<span class="sd">    Snippet model to `api/auth/login`&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Authenticate a User object against the User model.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Check the email.</span>
<span class="sd">            Check the password.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: Reference the class itself</span>

<span class="sd">        Flags:</span>
<span class="sd">            Errors and returns status code with error message,</span>
<span class="sd">                200, otherwise.</span>
<span class="sd">        Returns:</span>
<span class="sd">            {dict}: JSON Flask Response</span>
<span class="sd">                with an access token and a username.</span>
<span class="sd">                sets a refresh-cookie in headers.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">))</span>
            <span class="n">authorized</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">check_password</span><span class="p">(</span><span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">authorized</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">UnauthorizedError</span>

            <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">set__online</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

            <span class="n">expires</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
            <span class="n">access_token</span> <span class="o">=</span> <span class="n">create_access_token</span><span class="p">(</span>
                <span class="n">identity</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">),</span> <span class="n">expires_delta</span><span class="o">=</span><span class="n">expires</span>
            <span class="p">)</span>
            <span class="n">refresh_token</span> <span class="o">=</span> <span class="n">create_refresh_token</span><span class="p">(</span>
                <span class="n">identity</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="n">expires_delta</span><span class="o">=</span><span class="n">expires</span>
            <span class="p">)</span>
            <span class="n">refresh_cookie</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Set-Cookie&quot;</span><span class="p">,</span> <span class="s2">&quot;refresh_token=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">refresh_token</span><span class="p">))]</span>

            <span class="k">return</span> <span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="n">access_token</span><span class="p">,</span>
                    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="mi">200</span><span class="p">,</span>
                <span class="n">refresh_cookie</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="p">(</span><span class="n">UnauthorizedError</span><span class="p">,</span> <span class="n">DoesNotExist</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Invalid username or password.&quot;</span><span class="p">},</span> <span class="mi">401</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.auth.LoginApi.post" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>Authenticate a User object against the User model.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Check the email.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Check the password.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>self</code></td>
          <td>
          </td>
          <td><p>Reference the class itself</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

<details class="flags">
  <summary>Flags</summary>
  <p>Errors and returns status code with error message,
    200, otherwise.</p>
</details>
  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>{dict}: JSON Flask Response
with an access token and a username.
sets a refresh-cookie in headers.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/auth.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Authenticate a User object against the User model.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Check the email.</span>
<span class="sd">        Check the password.</span>

<span class="sd">    Args:</span>
<span class="sd">        self: Reference the class itself</span>

<span class="sd">    Flags:</span>
<span class="sd">        Errors and returns status code with error message,</span>
<span class="sd">            200, otherwise.</span>
<span class="sd">    Returns:</span>
<span class="sd">        {dict}: JSON Flask Response</span>
<span class="sd">            with an access token and a username.</span>
<span class="sd">            sets a refresh-cookie in headers.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">))</span>
        <span class="n">authorized</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">check_password</span><span class="p">(</span><span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">authorized</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UnauthorizedError</span>

        <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">set__online</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="n">expires</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">access_token</span> <span class="o">=</span> <span class="n">create_access_token</span><span class="p">(</span>
            <span class="n">identity</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">),</span> <span class="n">expires_delta</span><span class="o">=</span><span class="n">expires</span>
        <span class="p">)</span>
        <span class="n">refresh_token</span> <span class="o">=</span> <span class="n">create_refresh_token</span><span class="p">(</span>
            <span class="n">identity</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="n">expires_delta</span><span class="o">=</span><span class="n">expires</span>
        <span class="p">)</span>
        <span class="n">refresh_cookie</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Set-Cookie&quot;</span><span class="p">,</span> <span class="s2">&quot;refresh_token=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">refresh_token</span><span class="p">))]</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="n">access_token</span><span class="p">,</span>
                <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="mi">200</span><span class="p">,</span>
            <span class="n">refresh_cookie</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">except</span> <span class="p">(</span><span class="n">UnauthorizedError</span><span class="p">,</span> <span class="n">DoesNotExist</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Invalid username or password.&quot;</span><span class="p">},</span> <span class="mi">401</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.auth.LogoutApi" class="doc doc-heading">
        <code>LogoutApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Snippet model to <code>api/auth/logout</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/auth.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LogoutApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Snippet model to `api/auth/logout`&quot;&quot;&quot;</span>

    <span class="nd">@jwt_required</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new TokenBlockList document following a User&#39;s logout request.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Save an exiting User&#39;s access token to the TokenBlockList database.</span>
<span class="sd">            This prevents the access token from being used between the logout event</span>
<span class="sd">            and its expiration.</span>
<span class="sd">        Flags:</span>
<span class="sd">            Errors and returns status code with error message,</span>
<span class="sd">                200, otherwise.</span>
<span class="sd">        Returns:</span>
<span class="sd">            {dict}: JSON Flask Response</span>
<span class="sd">                confirmation that the token has been revoked.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">revoked_token</span> <span class="o">=</span> <span class="n">get_jwt</span><span class="p">()</span>

        <span class="n">jti</span> <span class="o">=</span> <span class="n">revoked_token</span><span class="p">[</span><span class="s2">&quot;jti&quot;</span><span class="p">]</span>
        <span class="n">owner</span> <span class="o">=</span> <span class="n">revoked_token</span><span class="p">[</span><span class="s2">&quot;sub&quot;</span><span class="p">]</span>
        <span class="n">created_ts</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">revoked_token</span><span class="p">[</span><span class="s2">&quot;iat&quot;</span><span class="p">])</span>
        <span class="n">expires_ts</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">revoked_token</span><span class="p">[</span><span class="s2">&quot;exp&quot;</span><span class="p">])</span>

        <span class="n">created</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">created_ts</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span>
            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span>
        <span class="p">)</span>
        <span class="n">expires</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">expires_ts</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span>
            <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span>
        <span class="p">)</span>

        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">owner</span><span class="p">)</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

        <span class="n">block_token</span> <span class="o">=</span> <span class="n">TokenBlocklist</span><span class="p">(</span>
            <span class="n">jti</span><span class="o">=</span><span class="n">jti</span><span class="p">,</span>
            <span class="n">created_on</span><span class="o">=</span><span class="n">created</span><span class="p">,</span>
            <span class="n">expires_on</span><span class="o">=</span><span class="n">expires</span><span class="p">,</span>
            <span class="n">revoked_on</span><span class="o">=</span><span class="n">now</span><span class="p">,</span>
            <span class="n">revoked_by</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">block_token</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">set__online</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;JWT revoked&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.auth.LogoutApi.post" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Create a new TokenBlockList document following a User's logout request.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Save an exiting User's access token to the TokenBlockList database.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>This prevents the access token from being used between the logout event</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>and its expiration.</p></td>
        </tr>
    </tbody>
  </table>

<details class="flags">
  <summary>Flags</summary>
  <p>Errors and returns status code with error message,
    200, otherwise.</p>
</details>
  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>{dict}: JSON Flask Response
confirmation that the token has been revoked.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/auth.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a new TokenBlockList document following a User&#39;s logout request.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Save an exiting User&#39;s access token to the TokenBlockList database.</span>
<span class="sd">        This prevents the access token from being used between the logout event</span>
<span class="sd">        and its expiration.</span>
<span class="sd">    Flags:</span>
<span class="sd">        Errors and returns status code with error message,</span>
<span class="sd">            200, otherwise.</span>
<span class="sd">    Returns:</span>
<span class="sd">        {dict}: JSON Flask Response</span>
<span class="sd">            confirmation that the token has been revoked.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">revoked_token</span> <span class="o">=</span> <span class="n">get_jwt</span><span class="p">()</span>

    <span class="n">jti</span> <span class="o">=</span> <span class="n">revoked_token</span><span class="p">[</span><span class="s2">&quot;jti&quot;</span><span class="p">]</span>
    <span class="n">owner</span> <span class="o">=</span> <span class="n">revoked_token</span><span class="p">[</span><span class="s2">&quot;sub&quot;</span><span class="p">]</span>
    <span class="n">created_ts</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">revoked_token</span><span class="p">[</span><span class="s2">&quot;iat&quot;</span><span class="p">])</span>
    <span class="n">expires_ts</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">revoked_token</span><span class="p">[</span><span class="s2">&quot;exp&quot;</span><span class="p">])</span>

    <span class="n">created</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">created_ts</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span>
        <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span>
    <span class="p">)</span>
    <span class="n">expires</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">expires_ts</span><span class="p">)</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span>
        <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span>
    <span class="p">)</span>

    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">owner</span><span class="p">)</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

    <span class="n">block_token</span> <span class="o">=</span> <span class="n">TokenBlocklist</span><span class="p">(</span>
        <span class="n">jti</span><span class="o">=</span><span class="n">jti</span><span class="p">,</span>
        <span class="n">created_on</span><span class="o">=</span><span class="n">created</span><span class="p">,</span>
        <span class="n">expires_on</span><span class="o">=</span><span class="n">expires</span><span class="p">,</span>
        <span class="n">revoked_on</span><span class="o">=</span><span class="n">now</span><span class="p">,</span>
        <span class="n">revoked_by</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">block_token</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

    <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">set__online</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;JWT revoked&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.auth.SignupApi" class="doc doc-heading">
        <code>SignupApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Snippet model to <code>api/auth/signup</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/auth.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SignupApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Snippet model to `api/auth/signup`&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The post function creates a new User object following the User model.</span>
<span class="sd">        Yields:</span>
<span class="sd">            Save a new User with the required username, email, password fields.</span>
<span class="sd">            Hash the password.</span>
<span class="sd">            Create three Snippets for the user to have some UI to play with</span>
<span class="sd">            upon authentication.</span>
<span class="sd">        Flags:</span>
<span class="sd">            Errors and returns status code with error message, 200 otherwise.</span>
<span class="sd">            Returns: {dict}: JSON Flask Response with an access token and a username sets a refresh cookie in headers.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: Reference the class in the method definition</span>

<span class="sd">        Returns:</span>
<span class="sd">            A tuple, the first item is a dictionary with an access token and username</span>

<span class="sd">        Note:</span>
<span class="sd">            The computation to update, save, reload a Snippet is required to</span>
<span class="sd">            ensure Objects have fully landed before they are referenced. It is extra</span>
<span class="sd">            complicated for this endpoint as we are awaiting reloads for three models:</span>
<span class="sd">            User, Collection and Snippet, all of which vary in `having to exist` before</span>
<span class="sd">            the other.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="o">**</span><span class="n">body</span><span class="p">)</span>

            <span class="n">user</span><span class="o">.</span><span class="n">hash_password</span><span class="p">()</span>
            <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">user</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>

            <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

            <span class="nb">id</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">username</span>

            <span class="c1"># Required to instantiate a new reference to the very same</span>
            <span class="c1"># and very new User for the purposes of attaching an owner</span>
            <span class="c1"># to the snippets.</span>
            <span class="n">saved_user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>

            <span class="n">snippet_py</span> <span class="o">=</span> <span class="n">Snippet</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.py&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
                <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first post&quot;</span><span class="p">],</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;From Cheat-Hub&quot;</span><span class="p">,</span>
                <span class="n">language</span><span class="o">=</span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="s2">&quot;print(&#39;hello </span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
                <span class="n">addedBy</span><span class="o">=</span><span class="n">saved_user</span><span class="p">,</span>
                <span class="n">addedOn</span><span class="o">=</span><span class="n">now</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">snippet_js</span> <span class="o">=</span> <span class="n">Snippet</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.js&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
                <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first post&quot;</span><span class="p">],</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;From Cheat-Hub&quot;</span><span class="p">,</span>
                <span class="n">language</span><span class="o">=</span><span class="s2">&quot;javascript&quot;</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="s2">&quot;console.log(&#39;hello </span><span class="si">{}</span><span class="s2">&#39;);&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
                <span class="n">addedBy</span><span class="o">=</span><span class="n">saved_user</span><span class="p">,</span>
                <span class="n">addedOn</span><span class="o">=</span><span class="n">now</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">snippet_sh</span> <span class="o">=</span> <span class="n">Snippet</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.sh&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
                <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first post&quot;</span><span class="p">],</span>
                <span class="n">description</span><span class="o">=</span><span class="s2">&quot;From Cheat-Hub&quot;</span><span class="p">,</span>
                <span class="n">language</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="s2">&quot;#!/bin/bash</span><span class="se">\n\n</span><span class="s2">echo &#39;hello </span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
                <span class="n">addedBy</span><span class="o">=</span><span class="n">saved_user</span><span class="p">,</span>
                <span class="n">addedOn</span><span class="o">=</span><span class="n">now</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">snippet_py</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">snippet_py</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
            <span class="n">snippet_js</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">snippet_js</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
            <span class="n">snippet_sh</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">snippet_sh</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>

            <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push_all__snippets_created</span><span class="o">=</span><span class="p">[</span><span class="n">snippet_py</span><span class="p">,</span> <span class="n">snippet_js</span><span class="p">,</span> <span class="n">snippet_sh</span><span class="p">])</span>
            <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">user</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>

            <span class="n">collection</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Greetings </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
                <span class="n">snippets</span><span class="o">=</span><span class="p">[</span><span class="n">snippet_py</span><span class="p">,</span> <span class="n">snippet_js</span><span class="p">,</span> <span class="n">snippet_sh</span><span class="p">],</span>
                <span class="n">date</span><span class="o">=</span><span class="n">now</span><span class="p">,</span>
                <span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">collection</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

            <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push__collections</span><span class="o">=</span><span class="n">collection</span><span class="p">)</span>
            <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

            <span class="n">expires</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
            <span class="n">access_token</span> <span class="o">=</span> <span class="n">create_access_token</span><span class="p">(</span>
                <span class="n">identity</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">username</span><span class="p">),</span> <span class="n">expires_delta</span><span class="o">=</span><span class="n">expires</span>
            <span class="p">)</span>
            <span class="n">refresh_token</span> <span class="o">=</span> <span class="n">create_refresh_token</span><span class="p">(</span>
                <span class="n">identity</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">),</span> <span class="n">expires_delta</span><span class="o">=</span><span class="n">expires</span>
            <span class="p">)</span>
            <span class="n">refresh_cookie</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Set-Cookie&quot;</span><span class="p">,</span> <span class="s2">&quot;refresh_token=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">refresh_token</span><span class="p">))]</span>

            <span class="k">return</span> <span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="n">access_token</span><span class="p">,</span>
                    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="mi">200</span><span class="p">,</span>
                <span class="n">refresh_cookie</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Request is missing required fields.&quot;</span><span class="p">},</span> <span class="mi">400</span>

        <span class="k">except</span> <span class="n">NotUniqueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;User with given email address already exists.&quot;</span><span class="p">},</span> <span class="mi">401</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.auth.SignupApi.post" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>The post function creates a new User object following the User model.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Save a new User with the required username, email, password fields.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Hash the password.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Create three Snippets for the user to have some UI to play with</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>upon authentication.</p></td>
        </tr>
    </tbody>
  </table>

<details class="flags">
  <summary>Flags</summary>
  <p>Errors and returns status code with error message, 200 otherwise.
Returns: {dict}: JSON Flask Response with an access token and a username sets a refresh cookie in headers.</p>
</details>
  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>self</code></td>
          <td>
          </td>
          <td><p>Reference the class in the method definition</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>A tuple, the first item is a dictionary with an access token and username</p></td>
        </tr>
    </tbody>
  </table>

<details class="note">
  <summary>Note</summary>
  <p>The computation to update, save, reload a Snippet is required to
ensure Objects have fully landed before they are referenced. It is extra
complicated for this endpoint as we are awaiting reloads for three models:
User, Collection and Snippet, all of which vary in <code>having to exist</code> before
the other.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>resources/auth.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The post function creates a new User object following the User model.</span>
<span class="sd">    Yields:</span>
<span class="sd">        Save a new User with the required username, email, password fields.</span>
<span class="sd">        Hash the password.</span>
<span class="sd">        Create three Snippets for the user to have some UI to play with</span>
<span class="sd">        upon authentication.</span>
<span class="sd">    Flags:</span>
<span class="sd">        Errors and returns status code with error message, 200 otherwise.</span>
<span class="sd">        Returns: {dict}: JSON Flask Response with an access token and a username sets a refresh cookie in headers.</span>

<span class="sd">    Args:</span>
<span class="sd">        self: Reference the class in the method definition</span>

<span class="sd">    Returns:</span>
<span class="sd">        A tuple, the first item is a dictionary with an access token and username</span>

<span class="sd">    Note:</span>
<span class="sd">        The computation to update, save, reload a Snippet is required to</span>
<span class="sd">        ensure Objects have fully landed before they are referenced. It is extra</span>
<span class="sd">        complicated for this endpoint as we are awaiting reloads for three models:</span>
<span class="sd">        User, Collection and Snippet, all of which vary in `having to exist` before</span>
<span class="sd">        the other.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="p">(</span><span class="o">**</span><span class="n">body</span><span class="p">)</span>

        <span class="n">user</span><span class="o">.</span><span class="n">hash_password</span><span class="p">()</span>
        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">user</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>

        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

        <span class="nb">id</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">username</span>

        <span class="c1"># Required to instantiate a new reference to the very same</span>
        <span class="c1"># and very new User for the purposes of attaching an owner</span>
        <span class="c1"># to the snippets.</span>
        <span class="n">saved_user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>

        <span class="n">snippet_py</span> <span class="o">=</span> <span class="n">Snippet</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.py&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
            <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first post&quot;</span><span class="p">],</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;From Cheat-Hub&quot;</span><span class="p">,</span>
            <span class="n">language</span><span class="o">=</span><span class="s2">&quot;python&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">&quot;print(&#39;hello </span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
            <span class="n">addedBy</span><span class="o">=</span><span class="n">saved_user</span><span class="p">,</span>
            <span class="n">addedOn</span><span class="o">=</span><span class="n">now</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">snippet_js</span> <span class="o">=</span> <span class="n">Snippet</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.js&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
            <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first post&quot;</span><span class="p">],</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;From Cheat-Hub&quot;</span><span class="p">,</span>
            <span class="n">language</span><span class="o">=</span><span class="s2">&quot;javascript&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">&quot;console.log(&#39;hello </span><span class="si">{}</span><span class="s2">&#39;);&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
            <span class="n">addedBy</span><span class="o">=</span><span class="n">saved_user</span><span class="p">,</span>
            <span class="n">addedOn</span><span class="o">=</span><span class="n">now</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">snippet_sh</span> <span class="o">=</span> <span class="n">Snippet</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">.sh&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
            <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first post&quot;</span><span class="p">],</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;From Cheat-Hub&quot;</span><span class="p">,</span>
            <span class="n">language</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="s2">&quot;#!/bin/bash</span><span class="se">\n\n</span><span class="s2">echo &#39;hello </span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
            <span class="n">addedBy</span><span class="o">=</span><span class="n">saved_user</span><span class="p">,</span>
            <span class="n">addedOn</span><span class="o">=</span><span class="n">now</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">snippet_py</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">snippet_py</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
        <span class="n">snippet_js</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">snippet_js</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
        <span class="n">snippet_sh</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">snippet_sh</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>

        <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push_all__snippets_created</span><span class="o">=</span><span class="p">[</span><span class="n">snippet_py</span><span class="p">,</span> <span class="n">snippet_js</span><span class="p">,</span> <span class="n">snippet_sh</span><span class="p">])</span>
        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">user</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>

        <span class="n">collection</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Greetings </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">username</span><span class="p">),</span>
            <span class="n">snippets</span><span class="o">=</span><span class="p">[</span><span class="n">snippet_py</span><span class="p">,</span> <span class="n">snippet_js</span><span class="p">,</span> <span class="n">snippet_sh</span><span class="p">],</span>
            <span class="n">date</span><span class="o">=</span><span class="n">now</span><span class="p">,</span>
            <span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">collection</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push__collections</span><span class="o">=</span><span class="n">collection</span><span class="p">)</span>
        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="n">expires</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">access_token</span> <span class="o">=</span> <span class="n">create_access_token</span><span class="p">(</span>
            <span class="n">identity</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">username</span><span class="p">),</span> <span class="n">expires_delta</span><span class="o">=</span><span class="n">expires</span>
        <span class="p">)</span>
        <span class="n">refresh_token</span> <span class="o">=</span> <span class="n">create_refresh_token</span><span class="p">(</span>
            <span class="n">identity</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">),</span> <span class="n">expires_delta</span><span class="o">=</span><span class="n">expires</span>
        <span class="p">)</span>
        <span class="n">refresh_cookie</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Set-Cookie&quot;</span><span class="p">,</span> <span class="s2">&quot;refresh_token=</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">refresh_token</span><span class="p">))]</span>

        <span class="k">return</span> <span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="n">access_token</span><span class="p">,</span>
                <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">username</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="mi">200</span><span class="p">,</span>
            <span class="n">refresh_cookie</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">except</span> <span class="n">FieldDoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Request is missing required fields.&quot;</span><span class="p">},</span> <span class="mi">400</span>

    <span class="k">except</span> <span class="n">NotUniqueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;User with given email address already exists.&quot;</span><span class="p">},</span> <span class="mi">401</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="resources.errors"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="resources.errors.BadTokenError" class="doc doc-heading">
        <code>BadTokenError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>It creates a new class called BadTokenError that inherits from the Exception class.</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">BadTokenError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;It creates a new class called BadTokenError that inherits from the Exception class.&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.errors.EmailAlreadyExistsError" class="doc doc-heading">
        <code>EmailAlreadyExistsError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>This class is used to raise an error when a user tries to register with an email that already exists in the database</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EmailAlreadyExistsError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class is used to raise an error when a user tries to register with an email that already exists in the database&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.errors.EmailDoesNotExistError" class="doc doc-heading">
        <code>EmailDoesNotExistError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>This class is used to raise an error when the email address provided does not exist in the database.</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EmailDoesNotExistError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class is used to raise an error when the email address provided does not exist in the database.&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.errors.ExpiredTokenError" class="doc doc-heading">
        <code>ExpiredTokenError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>This class is used to raise an exception when a token has expired</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ExpiredTokenError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class is used to raise an exception when a token has expired&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.errors.InternalServerError" class="doc doc-heading">
        <code>InternalServerError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>It creates a class called InternalServerError that inherits from the Exception class.</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">InternalServerError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;It creates a class called InternalServerError that inherits from the Exception class.&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.errors.SchemaValidationError" class="doc doc-heading">
        <code>SchemaValidationError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>It's a custom exception class that will be raised when the schema validation fails</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SchemaValidationError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;It&#39;s a custom exception class that will be raised when the schema validation fails&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.errors.SnippetAlreadyExistsError" class="doc doc-heading">
        <code>SnippetAlreadyExistsError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>It's a custom exception that is raised when a snippet already exists</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SnippetAlreadyExistsError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; It&#39;s a custom exception that is raised when a snippet already exists&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.errors.SnippetNotExistsError" class="doc doc-heading">
        <code>SnippetNotExistsError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>It's a custom exception that is raised when a snippet is not found in the database</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SnippetNotExistsError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;It&#39;s a custom exception that is raised when a snippet is not found in the database&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.errors.UnauthorizedError" class="doc doc-heading">
        <code>UnauthorizedError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>It's a custom exception class that inherits from the built-in Exception class</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UnauthorizedError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;It&#39;s a custom exception class that inherits from the built-in Exception class&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.errors.UpdatingSnippetError" class="doc doc-heading">
        <code>UpdatingSnippetError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>It's an exception that's raised when a snippet can't be updated</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UpdatingSnippetError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; It&#39;s an exception that&#39;s raised when a snippet can&#39;t be updated&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.errors.UserNotExistsError" class="doc doc-heading">
        <code>UserNotExistsError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>This class is used to raise an error when a user does not exist</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UserNotExistsError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class is used to raise an error when a user does not exist&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.errors.UsernameAlreadyExistsError" class="doc doc-heading">
        <code>UsernameAlreadyExistsError</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code>Exception</code></p>

  
      <p>This class is used to raise an error when a username already exists in the database</p>


        <details class="quote">
          <summary>Source code in <code>resources/errors.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UsernameAlreadyExistsError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class is used to raise an error when a username already exists in the database&quot;&quot;&quot;</span>

    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
        </details>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="resources.status"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="resources.status.Status" class="doc doc-heading">
        <code>Status</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Home endpoint to loosely convey the backend is running <code>/</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/status.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Status</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Home endpoint to loosely convey the backend is running `/`&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The get function returns a string that says &amp;quot;Api running&amp;quot;</span>


<span class="sd">        Args:</span>
<span class="sd">            self: Access variables that belongs to the class</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary with a key of data and value of &amp;quot;api running&amp;quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;Api running&quot;</span><span class="p">}</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;An Error Occurred during fetching Api&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.status.Status.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>The get function returns a string that says &quot;Api running&quot;</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>self</code></td>
          <td>
          </td>
          <td><p>Access variables that belongs to the class</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>A dictionary with a key of data and value of &quot;api running&quot;</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/status.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The get function returns a string that says &amp;quot;Api running&amp;quot;</span>


<span class="sd">    Args:</span>
<span class="sd">        self: Access variables that belongs to the class</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary with a key of data and value of &amp;quot;api running&amp;quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;Api running&quot;</span><span class="p">}</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;An Error Occurred during fetching Api&quot;</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="resources.routes"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h2 id="resources.routes.initialize_routes" class="doc doc-heading">
<code class="highlight language-python"><span class="n">initialize_routes</span><span class="p">(</span><span class="n">api</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>The initialize_routes function creates the routes for our API.
It is called in app.py when you run <code>flask run</code>.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>api</code></td>
          <td>
          </td>
          <td><p>Register the resources</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>The status of the api</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/routes.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">initialize_routes</span><span class="p">(</span><span class="n">api</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The initialize_routes function creates the routes for our API.</span>
<span class="sd">    It is called in app.py when you run `flask run`.</span>

<span class="sd">    Args:</span>
<span class="sd">        api: Register the resources</span>

<span class="sd">    Returns:</span>
<span class="sd">        The status of the api</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="sd">&quot;&quot;&quot;Backend root shows the status of the Api.&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">Status</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;Sign up Api: Post. username, email and password. Token returned. &quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">SignupApi</span><span class="p">,</span> <span class="s2">&quot;/api/auth/signup&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;Sign in Api: Post. username, email and password. Token returned. &quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">LoginApi</span><span class="p">,</span> <span class="s2">&quot;/api/auth/login&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;Sign out Api: Post. username, email and password. Token returned. &quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">LogoutApi</span><span class="p">,</span> <span class="s2">&quot;/api/auth/logout&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;Users Api: Get, Post.&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">UsersApi</span><span class="p">,</span> <span class="s2">&quot;/api/users&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;User Api: Get, Put, Delete.&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">UserApi</span><span class="p">,</span> <span class="s2">&quot;/api/users/&lt;id&gt;&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;Snippets Api: Get, Post.&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">SnippetsApi</span><span class="p">,</span> <span class="s2">&quot;/api/snippets&quot;</span><span class="p">)</span>
    <span class="sd">&quot;&quot;&quot;Snippets Api: Get, Put, Delete.&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">SnippetApi</span><span class="p">,</span> <span class="s2">&quot;/api/snippets/&lt;id&gt;&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;Like/Fave Snippet Api: Post. Token required.&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">LikeSnippetApi</span><span class="p">,</span> <span class="s2">&quot;/api/likesnippet/&lt;id&gt;&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;Collections Api: Get, Post.&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">CollectionsApi</span><span class="p">,</span> <span class="s2">&quot;/api/collections&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;Collection Api: Get, Put, Delete.&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">CollectionApi</span><span class="p">,</span> <span class="s2">&quot;/api/collections/&lt;id&gt;&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;User Profile Snippets Api: username id required&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">MySnippetsApi</span><span class="p">,</span> <span class="s2">&quot;/api/users/&lt;id&gt;/snippets&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;User Profile Fave Snippets Api: username id required&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">MyFaveSnippetsApi</span><span class="p">,</span> <span class="s2">&quot;/api/users/&lt;id&gt;/snippets/faves&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;User Profile Collections Api: username id required&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">MyCollectionsApi</span><span class="p">,</span> <span class="s2">&quot;/api/users/&lt;user_id&gt;/collections&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;User Profile Collection Api: collection id, username id required&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">MyCollectionApi</span><span class="p">,</span> <span class="s2">&quot;/api/users/&lt;user_id&gt;/collections/&lt;id&gt;&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;User Profile Snippet Options Api: username id required&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">MySnippetsOptionsApi</span><span class="p">,</span> <span class="s2">&quot;/api/users/&lt;user_id&gt;/snippets/options&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;User Profile Collections Options Api: username id required&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
        <span class="n">MyCollectionsOptionsApi</span><span class="p">,</span> <span class="s2">&quot;/api/users/&lt;user_id&gt;/collections/options&quot;</span>
    <span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;Search Snippets Api: search text, tag and language arg parsers enabled.&quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">SearchApi</span><span class="p">,</span> <span class="s2">&quot;/api/search&quot;</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;Tag list endpoint: List of all current tags returned. &quot;&quot;&quot;</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">TagsApi</span><span class="p">,</span> <span class="s2">&quot;/api/tags&quot;</span><span class="p">)</span>

    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">ForgotPassword</span><span class="p">,</span> <span class="s2">&quot;/api/auth/forgot&quot;</span><span class="p">)</span>
    <span class="n">api</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">ResetPassword</span><span class="p">,</span> <span class="s2">&quot;/api/auth/reset&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="resources.snippet"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="resources.snippet.LikeSnippetApi" class="doc doc-heading">
        <code>LikeSnippetApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Snippet model to <code>api/likesnippet/&lt;id&gt;</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/snippet.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LikeSnippetApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Snippet model to `api/likesnippet/&lt;id&gt;`&quot;&quot;&quot;</span>

    <span class="nd">@jwt_required</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add/Remove a Snippet reference to the `snippets_liked` list field of a User</span>
<span class="sd">            document with matching id; vice-versa to the `liked_by` list field of matching</span>
<span class="sd">            Snippet document.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a user object against a User model via token.</span>
<span class="sd">            Identify a Snippet document based on the `id` param.</span>
<span class="sd">            If the User is already in the Snippet&#39;s `liked_by` array,</span>
<span class="sd">                it means we&#39;re `unfaving` it.</span>
<span class="sd">            Otherwise, we&#39;re `faving` it.</span>
<span class="sd">            Update and reload both references to each other.</span>
<span class="sd">        Returns: {dict}</span>
<span class="sd">            JSON Flask Response, 200 with message</span>
<span class="sd">        Note:</span>
<span class="sd">            This response is a computation as there is no `Fave` collection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">snippet</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">snippet</span><span class="o">.</span><span class="n">likedBy</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;existing&quot;</span><span class="p">)</span>
            <span class="n">snippet</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pull__likedBy</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">dec__score</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">snippet</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">snippet</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
            <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pull__snippets_liked</span><span class="o">=</span><span class="n">snippet</span><span class="p">)</span>
            <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">user</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;snippet unfaved&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Snippet unfaved&quot;</span><span class="p">},</span> <span class="mi">200</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;new&quot;</span><span class="p">)</span>
            <span class="n">snippet</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push__likedBy</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">inc__score</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="n">snippet</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">snippet</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
            <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push__snippets_liked</span><span class="o">=</span><span class="n">snippet</span><span class="p">)</span>
            <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">user</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;snippet faved&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Snippet faved&quot;</span><span class="p">},</span> <span class="mi">200</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.snippet.LikeSnippetApi.post" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Add/Remove a Snippet reference to the <code>snippets_liked</code> list field of a User
    document with matching id; vice-versa to the <code>liked_by</code> list field of matching
    Snippet document.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a user object against a User model via token.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Identify a Snippet document based on the <code>id</code> param.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>If the User is already in the Snippet's <code>liked_by</code> array,
it means we're <code>unfaving</code> it.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Otherwise, we're <code>faving</code> it.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Update and reload both references to each other.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>{dict}</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>JSON Flask Response, 200 with message</p></td>
        </tr>
    </tbody>
  </table>

<details class="note">
  <summary>Note</summary>
  <p>This response is a computation as there is no <code>Fave</code> collection.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>resources/snippet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add/Remove a Snippet reference to the `snippets_liked` list field of a User</span>
<span class="sd">        document with matching id; vice-versa to the `liked_by` list field of matching</span>
<span class="sd">        Snippet document.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a user object against a User model via token.</span>
<span class="sd">        Identify a Snippet document based on the `id` param.</span>
<span class="sd">        If the User is already in the Snippet&#39;s `liked_by` array,</span>
<span class="sd">            it means we&#39;re `unfaving` it.</span>
<span class="sd">        Otherwise, we&#39;re `faving` it.</span>
<span class="sd">        Update and reload both references to each other.</span>
<span class="sd">    Returns: {dict}</span>
<span class="sd">        JSON Flask Response, 200 with message</span>
<span class="sd">    Note:</span>
<span class="sd">        This response is a computation as there is no `Fave` collection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
    <span class="n">snippet</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">snippet</span><span class="o">.</span><span class="n">likedBy</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;existing&quot;</span><span class="p">)</span>
        <span class="n">snippet</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pull__likedBy</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">dec__score</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">snippet</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">snippet</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
        <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">pull__snippets_liked</span><span class="o">=</span><span class="n">snippet</span><span class="p">)</span>
        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">user</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;snippet unfaved&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Snippet unfaved&quot;</span><span class="p">},</span> <span class="mi">200</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;new&quot;</span><span class="p">)</span>
        <span class="n">snippet</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push__likedBy</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">inc__score</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">snippet</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">snippet</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
        <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push__snippets_liked</span><span class="o">=</span><span class="n">snippet</span><span class="p">)</span>
        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">user</span><span class="o">.</span><span class="n">reload</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;snippet faved&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Snippet faved&quot;</span><span class="p">},</span> <span class="mi">200</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.snippet.SnippetApi" class="doc doc-heading">
        <code>SnippetApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Snippet model to <code>api/snippets/&lt;id&gt;</code> (singular)</p>


        <details class="quote">
          <summary>Source code in <code>resources/snippet.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SnippetApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Snippet model to `api/snippets/&lt;id&gt;` (singular)&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve one Snippet object with a matching id.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a Snippet object against a Snippet model</span>
<span class="sd">        Flags:</span>
<span class="sd">            If it doesn&#39;t exist.</span>
<span class="sd">        Returns: [{dict}]</span>
<span class="sd">            mappable JSON Flask Response, 200</span>
<span class="sd">            an array, even with one value to keep the frontend handlers consistent.</span>
<span class="sd">                else: Notifies the frontend with status message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">snippet</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
            <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                    <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">],</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">snippet</span>
            <span class="p">]</span>

            <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>

            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Code Snippet with given id doesn&#39;t exist.&quot;</span><span class="p">},</span> <span class="mi">410</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>

            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>

    <span class="nd">@jwt_required</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update one Snippet object with a matching id.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a user object against a User model via token.</span>
<span class="sd">            Identify a Snippet document created by the user object.</span>
<span class="sd">            Accept all updates to the Snippet document.</span>
<span class="sd">        Flags:</span>
<span class="sd">            If it doesn&#39;t exist.</span>
<span class="sd">            If required fields are missing.</span>
<span class="sd">        Returns: {dict}</span>
<span class="sd">            JSON Flask Response, 200</span>
<span class="sd">                else: Notifies the frontend with status code and message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
            <span class="n">snippet</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">addedBy</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
            <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
            <span class="n">snippet</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">body</span><span class="p">,</span> <span class="n">updatedOn</span><span class="o">=</span><span class="n">now</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Snippet updated&quot;</span><span class="p">},</span> <span class="mi">200</span>

        <span class="k">except</span> <span class="n">InvalidQueryError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Request is missing required fields.&quot;</span><span class="p">},</span> <span class="mi">400</span>
        <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Updating Code Snippet added by someone else is forbidden.&quot;</span>
            <span class="p">},</span> <span class="mi">403</span>

        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>

    <span class="nd">@jwt_required</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete one Snippet object with a matching id.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a user object against a User model via token.</span>
<span class="sd">            Identify a Snippet document created by the user object.</span>
<span class="sd">            Delete the Snippet document.</span>
<span class="sd">        Flags:</span>
<span class="sd">            If it doesn&#39;t exist and we&#39;ve gotten this far,</span>
<span class="sd">                It means it&#39;s made by someone else.</span>
<span class="sd">            If required fields are missing.</span>
<span class="sd">        Returns: {dict}</span>
<span class="sd">            JSON Flask Response, 200</span>
<span class="sd">                else: Notifies the frontend with status code and message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
            <span class="n">username</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
            <span class="n">snippet</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">addedBy</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
            <span class="n">snippet</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Snippet deleted&quot;</span><span class="p">},</span> <span class="mi">200</span>
        <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Deleting Code Snippet added by someone else is forbidden.&quot;</span>
            <span class="p">},</span> <span class="mi">403</span>

        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.snippet.SnippetApi.delete" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Delete one Snippet object with a matching id.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a user object against a User model via token.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Identify a Snippet document created by the user object.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Delete the Snippet document.</p></td>
        </tr>
    </tbody>
  </table>

<details class="flags">
  <summary>Flags</summary>
  <p>If it doesn't exist and we've gotten this far,
    It means it's made by someone else.
If required fields are missing.</p>
</details>
  <p><strong>{dict}</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>JSON Flask Response, 200
else: Notifies the frontend with status code and message.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/snippet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete one Snippet object with a matching id.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a user object against a User model via token.</span>
<span class="sd">        Identify a Snippet document created by the user object.</span>
<span class="sd">        Delete the Snippet document.</span>
<span class="sd">    Flags:</span>
<span class="sd">        If it doesn&#39;t exist and we&#39;ve gotten this far,</span>
<span class="sd">            It means it&#39;s made by someone else.</span>
<span class="sd">        If required fields are missing.</span>
<span class="sd">    Returns: {dict}</span>
<span class="sd">        JSON Flask Response, 200</span>
<span class="sd">            else: Notifies the frontend with status code and message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">snippet</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">addedBy</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
        <span class="n">snippet</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Snippet deleted&quot;</span><span class="p">},</span> <span class="mi">200</span>
    <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Deleting Code Snippet added by someone else is forbidden.&quot;</span>
        <span class="p">},</span> <span class="mi">403</span>

    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="resources.snippet.SnippetApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve one Snippet object with a matching id.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a Snippet object against a Snippet model</p></td>
        </tr>
    </tbody>
  </table>

<details class="flags">
  <summary>Flags</summary>
  <p>If it doesn't exist.</p>
</details>
  <p><strong>[{dict}]</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>mappable JSON Flask Response, 200</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>an array, even with one value to keep the frontend handlers consistent.
else: Notifies the frontend with status message.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/snippet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve one Snippet object with a matching id.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a Snippet object against a Snippet model</span>
<span class="sd">    Flags:</span>
<span class="sd">        If it doesn&#39;t exist.</span>
<span class="sd">    Returns: [{dict}]</span>
<span class="sd">        mappable JSON Flask Response, 200</span>
<span class="sd">        an array, even with one value to keep the frontend handlers consistent.</span>
<span class="sd">            else: Notifies the frontend with status message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">snippet</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">],</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">snippet</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Code Snippet with given id doesn&#39;t exist.&quot;</span><span class="p">},</span> <span class="mi">410</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="resources.snippet.SnippetApi.put" class="doc doc-heading">
<code class="highlight language-python"><span class="n">put</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Update one Snippet object with a matching id.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a user object against a User model via token.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Identify a Snippet document created by the user object.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Accept all updates to the Snippet document.</p></td>
        </tr>
    </tbody>
  </table>

<details class="flags">
  <summary>Flags</summary>
  <p>If it doesn't exist.
If required fields are missing.</p>
</details>
  <p><strong>{dict}</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>JSON Flask Response, 200
else: Notifies the frontend with status code and message.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/snippet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Update one Snippet object with a matching id.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a user object against a User model via token.</span>
<span class="sd">        Identify a Snippet document created by the user object.</span>
<span class="sd">        Accept all updates to the Snippet document.</span>
<span class="sd">    Flags:</span>
<span class="sd">        If it doesn&#39;t exist.</span>
<span class="sd">        If required fields are missing.</span>
<span class="sd">    Returns: {dict}</span>
<span class="sd">        JSON Flask Response, 200</span>
<span class="sd">            else: Notifies the frontend with status code and message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
        <span class="n">username</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">snippet</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">addedBy</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
        <span class="n">snippet</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">body</span><span class="p">,</span> <span class="n">updatedOn</span><span class="o">=</span><span class="n">now</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Snippet updated&quot;</span><span class="p">},</span> <span class="mi">200</span>

    <span class="k">except</span> <span class="n">InvalidQueryError</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Request is missing required fields.&quot;</span><span class="p">},</span> <span class="mi">400</span>
    <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Updating Code Snippet added by someone else is forbidden.&quot;</span>
        <span class="p">},</span> <span class="mi">403</span>

    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.snippet.SnippetsApi" class="doc doc-heading">
        <code>SnippetsApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Snippet model to <code>api/snippets</code> (plural)</p>


        <details class="quote">
          <summary>Source code in <code>resources/snippet.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SnippetsApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Snippet model to `api/snippets` (plural)&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve a list of public snippets.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Parse web args from the request.</span>
<span class="sd">            Get all existing tags from the databse.</span>
<span class="sd">            Query snippets that include tags from the request.</span>
<span class="sd">            If the tag field is empty,</span>
<span class="sd">                return all snippets with all tags.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [{dict}]: JSON Flask Response</span>
<span class="sd">            A paginated list of Snippet objects</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tag_request</span> <span class="o">=</span> <span class="n">tag_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="n">tag_request</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span>

        <span class="n">page_request</span> <span class="o">=</span> <span class="n">pagination_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">page_request</span><span class="p">[</span><span class="s2">&quot;page&quot;</span><span class="p">]</span>
        <span class="n">per_page</span> <span class="o">=</span> <span class="n">page_request</span><span class="p">[</span><span class="s2">&quot;per_page&quot;</span><span class="p">]</span>

        <span class="n">all_tags_arr</span> <span class="o">=</span> <span class="n">all_tags</span><span class="p">()</span>

        <span class="n">paginated</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span>
                <span class="n">tags__in</span><span class="o">=</span><span class="n">tags</span> <span class="k">if</span> <span class="n">tags</span> <span class="k">else</span> <span class="n">all_tags_arr</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;-addedOn&quot;</span><span class="p">)</span>
            <span class="o">.</span><span class="n">paginate</span><span class="p">(</span>
                <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">,</span>
                <span class="n">per_page</span><span class="o">=</span><span class="n">per_page</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

        <span class="n">meta</span> <span class="o">=</span> <span class="n">pagination_meta</span><span class="p">(</span><span class="n">paginated</span><span class="p">)</span>
        <span class="n">links</span> <span class="o">=</span> <span class="n">pagination_links</span><span class="p">(</span><span class="n">paginated</span><span class="p">,</span> <span class="s2">&quot;snippetsapi&quot;</span><span class="p">)</span>

        <span class="n">resp</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="n">links</span><span class="p">,</span>
            <span class="s2">&quot;has_prev&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">has_prev</span><span class="p">,</span>
            <span class="s2">&quot;has_next&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">has_next</span><span class="p">,</span>
            <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">page</span><span class="p">,</span>
            <span class="s2">&quot;total_pages&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">pages</span><span class="p">,</span>
            <span class="s2">&quot;items_per_page&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">per_page</span><span class="p">,</span>
            <span class="s2">&quot;total_items&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
            <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                    <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))),</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">paginated</span><span class="o">.</span><span class="n">items</span>
            <span class="p">],</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>

    <span class="nd">@jwt_required</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Save a Snippet document created by an authorized User.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a user object against a User model</span>
<span class="sd">            Set a Snippet document based on the Snippet model.</span>
<span class="sd">            Add the Snippet to the User&#39;s `snippets_created` field.</span>
<span class="sd">        Flags:</span>
<span class="sd">            File and validation errors</span>
<span class="sd">        Returns: {dict}</span>
<span class="sd">            JSON Flask Response, 200</span>
<span class="sd">                else: Notifies the frontend with status message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
            <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

            <span class="n">snippet</span> <span class="o">=</span> <span class="n">Snippet</span><span class="p">(</span><span class="o">**</span><span class="n">body</span><span class="p">,</span> <span class="n">addedBy</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">addedOn</span><span class="o">=</span><span class="n">now</span><span class="p">)</span>
            <span class="n">snippet</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push__snippets_created</span><span class="o">=</span><span class="n">snippet</span><span class="p">)</span>
            <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">snippet</span><span class="o">.</span><span class="n">id</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">)},</span> <span class="mi">200</span>

        <span class="k">except</span> <span class="p">(</span><span class="n">FieldDoesNotExist</span><span class="p">,</span> <span class="n">ValidationError</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Request is missing required fields.&quot;</span><span class="p">},</span> <span class="mi">400</span>
        <span class="k">except</span> <span class="n">NotUniqueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Code Snippet with given name already exists.&quot;</span><span class="p">},</span> <span class="mi">409</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.snippet.SnippetsApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve a list of public snippets.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Parse web args from the request.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Get all existing tags from the databse.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Query snippets that include tags from the request.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>If the tag field is empty,
return all snippets with all tags.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>[{dict}]: JSON Flask Response</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>A paginated list of Snippet objects</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/snippet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve a list of public snippets.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Parse web args from the request.</span>
<span class="sd">        Get all existing tags from the databse.</span>
<span class="sd">        Query snippets that include tags from the request.</span>
<span class="sd">        If the tag field is empty,</span>
<span class="sd">            return all snippets with all tags.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [{dict}]: JSON Flask Response</span>
<span class="sd">        A paginated list of Snippet objects</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tag_request</span> <span class="o">=</span> <span class="n">tag_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="n">tag_request</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span>

    <span class="n">page_request</span> <span class="o">=</span> <span class="n">pagination_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">page_request</span><span class="p">[</span><span class="s2">&quot;page&quot;</span><span class="p">]</span>
    <span class="n">per_page</span> <span class="o">=</span> <span class="n">page_request</span><span class="p">[</span><span class="s2">&quot;per_page&quot;</span><span class="p">]</span>

    <span class="n">all_tags_arr</span> <span class="o">=</span> <span class="n">all_tags</span><span class="p">()</span>

    <span class="n">paginated</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span>
            <span class="n">tags__in</span><span class="o">=</span><span class="n">tags</span> <span class="k">if</span> <span class="n">tags</span> <span class="k">else</span> <span class="n">all_tags_arr</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;-addedOn&quot;</span><span class="p">)</span>
        <span class="o">.</span><span class="n">paginate</span><span class="p">(</span>
            <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">,</span>
            <span class="n">per_page</span><span class="o">=</span><span class="n">per_page</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="n">meta</span> <span class="o">=</span> <span class="n">pagination_meta</span><span class="p">(</span><span class="n">paginated</span><span class="p">)</span>
    <span class="n">links</span> <span class="o">=</span> <span class="n">pagination_links</span><span class="p">(</span><span class="n">paginated</span><span class="p">,</span> <span class="s2">&quot;snippetsapi&quot;</span><span class="p">)</span>

    <span class="n">resp</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="n">links</span><span class="p">,</span>
        <span class="s2">&quot;has_prev&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">has_prev</span><span class="p">,</span>
        <span class="s2">&quot;has_next&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">has_next</span><span class="p">,</span>
        <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">page</span><span class="p">,</span>
        <span class="s2">&quot;total_pages&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">pages</span><span class="p">,</span>
        <span class="s2">&quot;items_per_page&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">per_page</span><span class="p">,</span>
        <span class="s2">&quot;total_items&quot;</span><span class="p">:</span> <span class="n">paginated</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
        <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))),</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">paginated</span><span class="o">.</span><span class="n">items</span>
        <span class="p">],</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="resources.snippet.SnippetsApi.post" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Save a Snippet document created by an authorized User.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a user object against a User model</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Set a Snippet document based on the Snippet model.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Add the Snippet to the User's <code>snippets_created</code> field.</p></td>
        </tr>
    </tbody>
  </table>

<details class="flags">
  <summary>Flags</summary>
  <p>File and validation errors</p>
</details>
  <p><strong>{dict}</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>JSON Flask Response, 200
else: Notifies the frontend with status message.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/snippet.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save a Snippet document created by an authorized User.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a user object against a User model</span>
<span class="sd">        Set a Snippet document based on the Snippet model.</span>
<span class="sd">        Add the Snippet to the User&#39;s `snippets_created` field.</span>
<span class="sd">    Flags:</span>
<span class="sd">        File and validation errors</span>
<span class="sd">    Returns: {dict}</span>
<span class="sd">        JSON Flask Response, 200</span>
<span class="sd">            else: Notifies the frontend with status message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

        <span class="n">snippet</span> <span class="o">=</span> <span class="n">Snippet</span><span class="p">(</span><span class="o">**</span><span class="n">body</span><span class="p">,</span> <span class="n">addedBy</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="n">addedOn</span><span class="o">=</span><span class="n">now</span><span class="p">)</span>
        <span class="n">snippet</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">user</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push__snippets_created</span><span class="o">=</span><span class="n">snippet</span><span class="p">)</span>
        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">snippet</span><span class="o">.</span><span class="n">id</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">)},</span> <span class="mi">200</span>

    <span class="k">except</span> <span class="p">(</span><span class="n">FieldDoesNotExist</span><span class="p">,</span> <span class="n">ValidationError</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Request is missing required fields.&quot;</span><span class="p">},</span> <span class="mi">400</span>
    <span class="k">except</span> <span class="n">NotUniqueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Code Snippet with given name already exists.&quot;</span><span class="p">},</span> <span class="mi">409</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="resources.collection"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="resources.collection.CollectionApi" class="doc doc-heading">
        <code>CollectionApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Collection model to <code>api/collections/&lt;id&gt;</code> (singular)</p>


        <details class="quote">
          <summary>Source code in <code>resources/collection.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CollectionApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Collection model to `api/collections/&lt;id&gt;` (singular)&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve one Collection object with a matching id.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a Collection object against a Collection model</span>
<span class="sd">        Flags:</span>
<span class="sd">            If it doesn&#39;t exist.</span>
<span class="sd">        Returns: [{dict}]</span>
<span class="sd">            mappable JSON Flask Response, 200,</span>
<span class="sd">            with dereferenced nested fields full of data,</span>
<span class="sd">            as an array even for one document to keep the frontend handlers consistent.</span>
<span class="sd">                else: Notifies the frontend with status message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">collection</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">):</span>
                <span class="n">collection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;snippets_id&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">i</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))}</span>
                            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;snippets&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span>
                                <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                                <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                            <span class="p">}</span>
                            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
                        <span class="p">],</span>
                    <span class="p">}</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Collection with given id doesn&#39;t exist.&quot;</span><span class="p">},</span> <span class="mi">410</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>

    <span class="nd">@jwt_required</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update one Collection object with a matching id.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a user object against a User model via token.</span>
<span class="sd">            Identify a Collection document created by the user object.</span>
<span class="sd">            Iterate through the `snippets` field of the request.</span>
<span class="sd">                Identify a Snippet object against the Snippet model</span>
<span class="sd">                for every item in the `snippets` field.</span>
<span class="sd">            Set this array as a the new `snippets` field in the Collection.</span>

<span class="sd">        Flags:</span>
<span class="sd">            If it doesn&#39;t exist.</span>
<span class="sd">            If required fields are missing.</span>
<span class="sd">        Returns: {dict}</span>
<span class="sd">            JSON Flask Response, 200</span>
<span class="sd">                else: Notifies the frontend with status code and message.</span>
<span class="sd">        Note:</span>
<span class="sd">            Looping and setting a new array seems like an expensive computation</span>
<span class="sd">            every time someone updates a collection, and the snippets within it.</span>
<span class="sd">            Why can&#39;t we just keep it if it&#39;s already there, add it if it isn&#39;t?</span>
<span class="sd">            Because the Snippet has to first exist in the database in order to</span>
<span class="sd">            `find` and add it to a Collection, the result will always be an</span>
<span class="sd">            `all or not all` flip. An alternative might be to create separate endpoints</span>
<span class="sd">            for adding and removing values from a nested document, which may or may</span>
<span class="sd">            not require the same amount of computation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
            <span class="n">collection</span> <span class="o">=</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
            <span class="n">snippets</span> <span class="o">=</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
            <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

            <span class="n">snippet_array</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">snippet</span> <span class="ow">in</span> <span class="n">snippets</span><span class="p">:</span>
                <span class="n">snip</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">snippet</span><span class="p">)</span>
                <span class="n">snippet_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">snip</span><span class="p">)</span>

            <span class="n">collection</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">now</span><span class="p">,</span> <span class="n">set__snippets</span><span class="o">=</span><span class="n">snippet_array</span><span class="p">)</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Collection updated&quot;</span><span class="p">},</span> <span class="mi">200</span>

        <span class="k">except</span> <span class="n">InvalidQueryError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Request is missing required fields.&quot;</span><span class="p">},</span> <span class="mi">400</span>
        <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Updating Collection added by someone else is forbidden.&quot;</span>
            <span class="p">},</span> <span class="mi">403</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>

    <span class="nd">@jwt_required</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete one Collection object with a matching id.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a user object against a User model via token.</span>
<span class="sd">            Identify a Collection document created by the user object.</span>
<span class="sd">            Delete the Collection document.</span>
<span class="sd">        Flags:</span>
<span class="sd">            If it doesn&#39;t exist and we&#39;ve gotten this far,</span>
<span class="sd">                It means it&#39;s made by someone else.</span>
<span class="sd">            If required fields are missing.</span>
<span class="sd">        Returns: {dict}</span>
<span class="sd">            JSON Flask Response, 200</span>
<span class="sd">                else: Notifies the frontend with status code and message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
            <span class="n">collection</span> <span class="o">=</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Collection deleted&quot;</span><span class="p">},</span> <span class="mi">200</span>
        <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Deleting Collection added by someone else is forbidden.&quot;</span>
            <span class="p">},</span> <span class="mi">403</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.collection.CollectionApi.delete" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Delete one Collection object with a matching id.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a user object against a User model via token.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Identify a Collection document created by the user object.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Delete the Collection document.</p></td>
        </tr>
    </tbody>
  </table>

<details class="flags">
  <summary>Flags</summary>
  <p>If it doesn't exist and we've gotten this far,
    It means it's made by someone else.
If required fields are missing.</p>
</details>
  <p><strong>{dict}</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>JSON Flask Response, 200
else: Notifies the frontend with status code and message.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/collection.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete one Collection object with a matching id.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a user object against a User model via token.</span>
<span class="sd">        Identify a Collection document created by the user object.</span>
<span class="sd">        Delete the Collection document.</span>
<span class="sd">    Flags:</span>
<span class="sd">        If it doesn&#39;t exist and we&#39;ve gotten this far,</span>
<span class="sd">            It means it&#39;s made by someone else.</span>
<span class="sd">        If required fields are missing.</span>
<span class="sd">    Returns: {dict}</span>
<span class="sd">        JSON Flask Response, 200</span>
<span class="sd">            else: Notifies the frontend with status code and message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">collection</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Collection deleted&quot;</span><span class="p">},</span> <span class="mi">200</span>
    <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Deleting Collection added by someone else is forbidden.&quot;</span>
        <span class="p">},</span> <span class="mi">403</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="resources.collection.CollectionApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve one Collection object with a matching id.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a Collection object against a Collection model</p></td>
        </tr>
    </tbody>
  </table>

<details class="flags">
  <summary>Flags</summary>
  <p>If it doesn't exist.</p>
</details>
  <p><strong>[{dict}]</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>mappable JSON Flask Response, 200,</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>with dereferenced nested fields full of data,</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>as an array even for one document to keep the frontend handlers consistent.
else: Notifies the frontend with status message.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/collection.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve one Collection object with a matching id.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a Collection object against a Collection model</span>
<span class="sd">    Flags:</span>
<span class="sd">        If it doesn&#39;t exist.</span>
<span class="sd">    Returns: [{dict}]</span>
<span class="sd">        mappable JSON Flask Response, 200,</span>
<span class="sd">        with dereferenced nested fields full of data,</span>
<span class="sd">        as an array even for one document to keep the frontend handlers consistent.</span>
<span class="sd">            else: Notifies the frontend with status message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">):</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;snippets_id&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">i</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))}</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;snippets&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                        <span class="p">}</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
                    <span class="p">],</span>
                <span class="p">}</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Collection with given id doesn&#39;t exist.&quot;</span><span class="p">},</span> <span class="mi">410</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="resources.collection.CollectionApi.put" class="doc doc-heading">
<code class="highlight language-python"><span class="n">put</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Update one Collection object with a matching id.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a user object against a User model via token.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Identify a Collection document created by the user object.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Iterate through the <code>snippets</code> field of the request.
Identify a Snippet object against the Snippet model
for every item in the <code>snippets</code> field.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Set this array as a the new <code>snippets</code> field in the Collection.</p></td>
        </tr>
    </tbody>
  </table>

<details class="flags">
  <summary>Flags</summary>
  <p>If it doesn't exist.
If required fields are missing.</p>
</details>
  <p><strong>{dict}</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>JSON Flask Response, 200
else: Notifies the frontend with status code and message.</p></td>
        </tr>
    </tbody>
  </table>

<details class="note">
  <summary>Note</summary>
  <p>Looping and setting a new array seems like an expensive computation
every time someone updates a collection, and the snippets within it.
Why can't we just keep it if it's already there, add it if it isn't?
Because the Snippet has to first exist in the database in order to
<code>find</code> and add it to a Collection, the result will always be an
<code>all or not all</code> flip. An alternative might be to create separate endpoints
for adding and removing values from a nested document, which may or may
not require the same amount of computation.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>resources/collection.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Update one Collection object with a matching id.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a user object against a User model via token.</span>
<span class="sd">        Identify a Collection document created by the user object.</span>
<span class="sd">        Iterate through the `snippets` field of the request.</span>
<span class="sd">            Identify a Snippet object against the Snippet model</span>
<span class="sd">            for every item in the `snippets` field.</span>
<span class="sd">        Set this array as a the new `snippets` field in the Collection.</span>

<span class="sd">    Flags:</span>
<span class="sd">        If it doesn&#39;t exist.</span>
<span class="sd">        If required fields are missing.</span>
<span class="sd">    Returns: {dict}</span>
<span class="sd">        JSON Flask Response, 200</span>
<span class="sd">            else: Notifies the frontend with status code and message.</span>
<span class="sd">    Note:</span>
<span class="sd">        Looping and setting a new array seems like an expensive computation</span>
<span class="sd">        every time someone updates a collection, and the snippets within it.</span>
<span class="sd">        Why can&#39;t we just keep it if it&#39;s already there, add it if it isn&#39;t?</span>
<span class="sd">        Because the Snippet has to first exist in the database in order to</span>
<span class="sd">        `find` and add it to a Collection, the result will always be an</span>
<span class="sd">        `all or not all` flip. An alternative might be to create separate endpoints</span>
<span class="sd">        for adding and removing values from a nested document, which may or may</span>
<span class="sd">        not require the same amount of computation.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="n">snippets</span> <span class="o">=</span> <span class="n">body</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

        <span class="n">snippet_array</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">snippet</span> <span class="ow">in</span> <span class="n">snippets</span><span class="p">:</span>
            <span class="n">snip</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">snippet</span><span class="p">)</span>
            <span class="n">snippet_array</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">snip</span><span class="p">)</span>

        <span class="n">collection</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">now</span><span class="p">,</span> <span class="n">set__snippets</span><span class="o">=</span><span class="n">snippet_array</span><span class="p">)</span>
        <span class="n">collection</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Collection updated&quot;</span><span class="p">},</span> <span class="mi">200</span>

    <span class="k">except</span> <span class="n">InvalidQueryError</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Request is missing required fields.&quot;</span><span class="p">},</span> <span class="mi">400</span>
    <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Updating Collection added by someone else is forbidden.&quot;</span>
        <span class="p">},</span> <span class="mi">403</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.collection.CollectionsApi" class="doc doc-heading">
        <code>CollectionsApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Collection model to <code>api/collections</code> (plural)</p>


        <details class="quote">
          <summary>Source code in <code>resources/collection.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CollectionsApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Collection model to `api/collections` (plural)&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve loose list of all Collections.</span>

<span class="sd">        Yields:</span>
<span class="sd">            jsonify a Query object of the Collection model</span>

<span class="sd">        Returns:</span>
<span class="sd">            [{dict}]: JSON Flask Response</span>
<span class="sd">            A loose reference list of Collection objects</span>
<span class="sd">        Note:</span>
<span class="sd">            This endpoint is not the primary endpoint for fetching field details,</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">collections</span> <span class="o">=</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">private</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                <span class="s2">&quot;snippets&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;snippet_title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;snippet_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="p">}</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
                <span class="p">],</span>
                <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">collections</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

    <span class="nd">@jwt_required</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Save a Collection document created by an authorized User.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a user object against a User model</span>
<span class="sd">            Set a Collection document based on the Collection model.</span>
<span class="sd">            Add the Collection to the User&#39;s `collections` field.</span>
<span class="sd">        Flags:</span>
<span class="sd">            File and validation errors</span>
<span class="sd">        Returns: {dict}</span>
<span class="sd">            JSON Flask Response, 200</span>
<span class="sd">                else: Notifies the frontend with status message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
            <span class="n">owner</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
            <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

            <span class="n">collection</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span><span class="o">**</span><span class="n">body</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="n">owner</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">now</span><span class="p">)</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="n">owner</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push__collections</span><span class="o">=</span><span class="n">collection</span><span class="p">)</span>
            <span class="n">owner</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">id</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">)},</span> <span class="mi">200</span>

        <span class="k">except</span> <span class="p">(</span><span class="n">FieldDoesNotExist</span><span class="p">,</span> <span class="n">ValidationError</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Request is missing required fields.&quot;</span><span class="p">},</span> <span class="mi">400</span>
        <span class="k">except</span> <span class="n">NotUniqueError</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Collection with given name already exists.&quot;</span><span class="p">},</span> <span class="mi">409</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.collection.CollectionsApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve loose list of all Collections.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>jsonify a Query object of the Collection model</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>[{dict}]: JSON Flask Response</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>A loose reference list of Collection objects</p></td>
        </tr>
    </tbody>
  </table>

<details class="note">
  <summary>Note</summary>
  <p>This endpoint is not the primary endpoint for fetching field details,</p>
</details>
      <details class="quote">
        <summary>Source code in <code>resources/collection.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve loose list of all Collections.</span>

<span class="sd">    Yields:</span>
<span class="sd">        jsonify a Query object of the Collection model</span>

<span class="sd">    Returns:</span>
<span class="sd">        [{dict}]: JSON Flask Response</span>
<span class="sd">        A loose reference list of Collection objects</span>
<span class="sd">    Note:</span>
<span class="sd">        This endpoint is not the primary endpoint for fetching field details,</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">collections</span> <span class="o">=</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">private</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
            <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
            <span class="s2">&quot;snippets&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;snippet_title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;snippet_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
            <span class="p">],</span>
            <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">collections</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="resources.collection.CollectionsApi.post" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Save a Collection document created by an authorized User.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a user object against a User model</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Set a Collection document based on the Collection model.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Add the Collection to the User's <code>collections</code> field.</p></td>
        </tr>
    </tbody>
  </table>

<details class="flags">
  <summary>Flags</summary>
  <p>File and validation errors</p>
</details>
  <p><strong>{dict}</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>JSON Flask Response, 200
else: Notifies the frontend with status message.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/collection.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save a Collection document created by an authorized User.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a user object against a User model</span>
<span class="sd">        Set a Collection document based on the Collection model.</span>
<span class="sd">        Add the Collection to the User&#39;s `collections` field.</span>
<span class="sd">    Flags:</span>
<span class="sd">        File and validation errors</span>
<span class="sd">    Returns: {dict}</span>
<span class="sd">        JSON Flask Response, 200</span>
<span class="sd">            else: Notifies the frontend with status message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
        <span class="n">owner</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>

        <span class="n">collection</span> <span class="o">=</span> <span class="n">Collection</span><span class="p">(</span><span class="o">**</span><span class="n">body</span><span class="p">,</span> <span class="n">owner</span><span class="o">=</span><span class="n">owner</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="n">now</span><span class="p">)</span>
        <span class="n">collection</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">owner</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">push__collections</span><span class="o">=</span><span class="n">collection</span><span class="p">)</span>
        <span class="n">owner</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="nb">id</span> <span class="o">=</span> <span class="n">collection</span><span class="o">.</span><span class="n">id</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="nb">id</span><span class="p">)},</span> <span class="mi">200</span>

    <span class="k">except</span> <span class="p">(</span><span class="n">FieldDoesNotExist</span><span class="p">,</span> <span class="n">ValidationError</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Request is missing required fields.&quot;</span><span class="p">},</span> <span class="mi">400</span>
    <span class="k">except</span> <span class="n">NotUniqueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Collection with given name already exists.&quot;</span><span class="p">},</span> <span class="mi">409</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Something went wrong.&quot;</span><span class="p">},</span> <span class="mi">500</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="resources.profile"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="resources.profile.MyCollectionApi" class="doc doc-heading">
        <code>MyCollectionApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Snippet model to <code>api/users/&lt;user_id&gt;/collections/&lt;id&gt;</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/profile.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MyCollectionApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Snippet model to `api/users/&lt;user_id&gt;/collections/&lt;id&gt;`&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve one Collection created by a user.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a User object against a User model via username (user_id).</span>
<span class="sd">            jsonify a Query object to the Collections database of a</span>
<span class="sd">            Collection object with field `owner` equal to the User</span>
<span class="sd">            model via unique username `user_id`, and a `collecion_id`</span>
<span class="sd">            equal to the query `id`.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [{dict}]: JSON Flask Response</span>
<span class="sd">            A healthy Collection object with unnested, dereferenced Snippets</span>
<span class="sd">        Note:</span>
<span class="sd">            This endpoint returns a response identical to `api/collections/&lt;id&gt;`;</span>
<span class="sd">            the only difference being the `user_id` argument.</span>
<span class="sd">            This is to accommodate Collections flagged as `private` to the User, a</span>
<span class="sd">            field that is currently false for all Collections by default.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
            <span class="n">collection</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">):</span>
                <span class="n">collection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span>
                            <span class="s2">&quot;mycollectionapi&quot;</span><span class="p">,</span>
                            <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
                            <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="p">),</span>
                        <span class="s2">&quot;snippets&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span>
                                <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                                <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span>
                                    <span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))</span>
                                <span class="p">),</span>
                            <span class="p">}</span>
                            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
                        <span class="p">],</span>
                    <span class="p">}</span>
                <span class="p">)</span>

            <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SnippetNotExistsError</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.profile.MyCollectionApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve one Collection created by a user.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a User object against a User model via username (user_id).</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>jsonify a Query object to the Collections database of a</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Collection object with field <code>owner</code> equal to the User</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>model via unique username <code>user_id</code>, and a <code>collecion_id</code></p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>equal to the query <code>id</code>.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>[{dict}]: JSON Flask Response</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>A healthy Collection object with unnested, dereferenced Snippets</p></td>
        </tr>
    </tbody>
  </table>

<details class="note">
  <summary>Note</summary>
  <p>This endpoint returns a response identical to <code>api/collections/&lt;id&gt;</code>;
the only difference being the <code>user_id</code> argument.
This is to accommodate Collections flagged as <code>private</code> to the User, a
field that is currently false for all Collections by default.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>resources/profile.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve one Collection created by a user.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a User object against a User model via username (user_id).</span>
<span class="sd">        jsonify a Query object to the Collections database of a</span>
<span class="sd">        Collection object with field `owner` equal to the User</span>
<span class="sd">        model via unique username `user_id`, and a `collecion_id`</span>
<span class="sd">        equal to the query `id`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [{dict}]: JSON Flask Response</span>
<span class="sd">        A healthy Collection object with unnested, dereferenced Snippets</span>
<span class="sd">    Note:</span>
<span class="sd">        This endpoint returns a response identical to `api/collections/&lt;id&gt;`;</span>
<span class="sd">        the only difference being the `user_id` argument.</span>
<span class="sd">        This is to accommodate Collections flagged as `private` to the User, a</span>
<span class="sd">        field that is currently false for all Collections by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">collection</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">):</span>
            <span class="n">collection</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span>
                        <span class="s2">&quot;mycollectionapi&quot;</span><span class="p">,</span>
                        <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span>
                        <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="p">),</span>
                    <span class="s2">&quot;snippets&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span>
                                <span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))</span>
                            <span class="p">),</span>
                        <span class="p">}</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
                    <span class="p">],</span>
                <span class="p">}</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">collection</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SnippetNotExistsError</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.profile.MyCollectionsApi" class="doc doc-heading">
        <code>MyCollectionsApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Snippet model to <code>api/users/&lt;id&gt;/collections</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/profile.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MyCollectionsApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Snippet model to `api/users/&lt;id&gt;/collections`&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve a complete list of all Collections created by a user.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a User object against a User model via username (id).</span>
<span class="sd">            jsonify a Query object to the Collections database of all</span>
<span class="sd">            Collection objects with field `owner` equal to the User</span>
<span class="sd">            model via unique username and/or id.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [{dict}]: JSON Flask Response</span>
<span class="sd">            A complete list of Snippet objects, with all nested fields</span>
<span class="sd">            dereferenced.</span>
<span class="sd">        Note:</span>
<span class="sd">            This endpoint is the primary endpoint for fetching User&#39;s</span>
<span class="sd">            Snippets profile.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">collections</span> <span class="o">=</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;-date&quot;</span><span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span>
                    <span class="s2">&quot;mycollectionapi&quot;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))</span>
                <span class="p">),</span>
                <span class="s2">&quot;snippets&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                        <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))),</span>
                    <span class="p">}</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
                <span class="p">],</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">collections</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.profile.MyCollectionsApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve a complete list of all Collections created by a user.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a User object against a User model via username (id).</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>jsonify a Query object to the Collections database of all</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Collection objects with field <code>owner</code> equal to the User</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>model via unique username and/or id.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>[{dict}]: JSON Flask Response</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>A complete list of Snippet objects, with all nested fields</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>dereferenced.</p></td>
        </tr>
    </tbody>
  </table>

<details class="note">
  <summary>Note</summary>
  <p>This endpoint is the primary endpoint for fetching User's
Snippets profile.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>resources/profile.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve a complete list of all Collections created by a user.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a User object against a User model via username (id).</span>
<span class="sd">        jsonify a Query object to the Collections database of all</span>
<span class="sd">        Collection objects with field `owner` equal to the User</span>
<span class="sd">        model via unique username and/or id.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [{dict}]: JSON Flask Response</span>
<span class="sd">        A complete list of Snippet objects, with all nested fields</span>
<span class="sd">        dereferenced.</span>
<span class="sd">    Note:</span>
<span class="sd">        This endpoint is the primary endpoint for fetching User&#39;s</span>
<span class="sd">        Snippets profile.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
    <span class="n">collections</span> <span class="o">=</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;-date&quot;</span><span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
            <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;owner&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
            <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span>
                <span class="s2">&quot;mycollectionapi&quot;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))</span>
            <span class="p">),</span>
            <span class="s2">&quot;snippets&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                    <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))),</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets&quot;</span><span class="p">]</span>
            <span class="p">],</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">collections</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.profile.MyCollectionsOptionsApi" class="doc doc-heading">
        <code>MyCollectionsOptionsApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Collection model to <code>api/users/&lt;user_id&gt;/collections/options</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/profile.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MyCollectionsOptionsApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Collection model to `api/users/&lt;user_id&gt;/collections/options`&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve an array of all Collections available to the user.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a User object against a User model via username (user_id).</span>
<span class="sd">            jsonify a Query object to the Collections database of all</span>
<span class="sd">            Collection objects with field `owner` equal to the User</span>
<span class="sd">            model via unique username `user_id`, formatted as `options` in</span>
<span class="sd">            an HTML `select` element.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [{dict}]: JSON Flask Response</span>
<span class="sd">                array of Collections with `label` and `value` keys for `Select` UI.</span>
<span class="sd">        Note:</span>
<span class="sd">            This key endpoint is what allows the frontend to quickly present documents</span>
<span class="sd">            as creatable and/or multi-select options immediately following updates to</span>
<span class="sd">            a user&#39;s Collections profile.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">collections</span> <span class="o">=</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))}</span>
            <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">collections</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.profile.MyCollectionsOptionsApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve an array of all Collections available to the user.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a User object against a User model via username (user_id).</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>jsonify a Query object to the Collections database of all</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Collection objects with field <code>owner</code> equal to the User</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>model via unique username <code>user_id</code>, formatted as <code>options</code> in</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>an HTML <code>select</code> element.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>[{dict}]: JSON Flask Response
array of Collections with <code>label</code> and <code>value</code> keys for <code>Select</code> UI.</p></td>
        </tr>
    </tbody>
  </table>

<details class="note">
  <summary>Note</summary>
  <p>This key endpoint is what allows the frontend to quickly present documents
as creatable and/or multi-select options immediately following updates to
a user's Collections profile.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>resources/profile.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve an array of all Collections available to the user.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a User object against a User model via username (user_id).</span>
<span class="sd">        jsonify a Query object to the Collections database of all</span>
<span class="sd">        Collection objects with field `owner` equal to the User</span>
<span class="sd">        model via unique username `user_id`, formatted as `options` in</span>
<span class="sd">        an HTML `select` element.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [{dict}]: JSON Flask Response</span>
<span class="sd">            array of Collections with `label` and `value` keys for `Select` UI.</span>
<span class="sd">    Note:</span>
<span class="sd">        This key endpoint is what allows the frontend to quickly present documents</span>
<span class="sd">        as creatable and/or multi-select options immediately following updates to</span>
<span class="sd">        a user&#39;s Collections profile.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
    <span class="n">collections</span> <span class="o">=</span> <span class="n">Collection</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">owner</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))}</span>
        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">collections</span>
    <span class="p">]</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.profile.MyFaveSnippetsApi" class="doc doc-heading">
        <code>MyFaveSnippetsApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Snippet model to <code>api/users/&lt;id&gt;/snippets/faves</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/profile.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MyFaveSnippetsApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Snippet model to `api/users/&lt;id&gt;/snippets/faves`&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve a complete list of all Snippets `liked` by a user.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a User object against a User model via username.</span>
<span class="sd">            jsonify a Query object to the Snippets database of all</span>
<span class="sd">            Snippet objects with a `likedBy` list field that includes the</span>
<span class="sd">            User.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [{dict}]: JSON Flask Response</span>
<span class="sd">            A complete list of Snippet objects, with all nested fields</span>
<span class="sd">            dereferenced.</span>
<span class="sd">        Note:</span>
<span class="sd">            This API response is modeled to be received as a Collection object,</span>
<span class="sd">            even though it is a pure computation of values in nested document</span>
<span class="sd">            fields. This is done to simplofy frontend handlers as the `Faves`</span>
<span class="sd">            endpoint&#39;s UI is rendered as a unique `collection`.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
        <span class="n">snips</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">likedBy</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;faves&quot;</span><span class="p">,</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Faves&quot;</span><span class="p">,</span>
                <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span>
                <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;myfavesnippetsapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">),</span>
                <span class="s2">&quot;snippets&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                        <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;myfavesnippetsapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">user</span><span class="p">),</span>
                    <span class="p">}</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">snips</span>
                <span class="p">],</span>
            <span class="p">}</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.profile.MyFaveSnippetsApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve a complete list of all Snippets <code>liked</code> by a user.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a User object against a User model via username.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>jsonify a Query object to the Snippets database of all</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Snippet objects with a <code>likedBy</code> list field that includes the</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>User.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>[{dict}]: JSON Flask Response</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>A complete list of Snippet objects, with all nested fields</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>dereferenced.</p></td>
        </tr>
    </tbody>
  </table>

<details class="note">
  <summary>Note</summary>
  <p>This API response is modeled to be received as a Collection object,
even though it is a pure computation of values in nested document
fields. This is done to simplofy frontend handlers as the <code>Faves</code>
endpoint's UI is rendered as a unique <code>collection</code>.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>resources/profile.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve a complete list of all Snippets `liked` by a user.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a User object against a User model via username.</span>
<span class="sd">        jsonify a Query object to the Snippets database of all</span>
<span class="sd">        Snippet objects with a `likedBy` list field that includes the</span>
<span class="sd">        User.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [{dict}]: JSON Flask Response</span>
<span class="sd">        A complete list of Snippet objects, with all nested fields</span>
<span class="sd">        dereferenced.</span>
<span class="sd">    Note:</span>
<span class="sd">        This API response is modeled to be received as a Collection object,</span>
<span class="sd">        even though it is a pure computation of values in nested document</span>
<span class="sd">        fields. This is done to simplofy frontend handlers as the `Faves`</span>
<span class="sd">        endpoint&#39;s UI is rendered as a unique `collection`.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">snips</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">likedBy</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="s2">&quot;faves&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Faves&quot;</span><span class="p">,</span>
            <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="nb">id</span><span class="p">,</span>
            <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;myfavesnippetsapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">id</span><span class="p">),</span>
            <span class="s2">&quot;snippets&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                    <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;myfavesnippetsapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">user</span><span class="p">),</span>
                <span class="p">}</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">snips</span>
            <span class="p">],</span>
        <span class="p">}</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.profile.MySnippetsApi" class="doc doc-heading">
        <code>MySnippetsApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Snippet model to <code>api/users/&lt;id&gt;/snippets</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/profile.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MySnippetsApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Snippet model to `api/users/&lt;id&gt;/snippets`&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve a complete list of all Snippets created by a user.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a User object against a User model via username (id).</span>
<span class="sd">            jsonify a Query object to the Snippets database of all</span>
<span class="sd">            Snippet objects with field `addedBy` equal to the User</span>
<span class="sd">            model&#39;s unique username.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [{dict}]: JSON Flask Response</span>
<span class="sd">            A complete list of Snippet objects, with all nested fields</span>
<span class="sd">            dereferenced.</span>
<span class="sd">        Note:</span>
<span class="sd">            This endpoint is the primary endpoint for fetching User&#39;s</span>
<span class="sd">            Snippets profile.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
        <span class="n">snippets</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">addedBy</span><span class="o">=</span><span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;-addedOn&quot;</span><span class="p">)</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">],</span>
                <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))),</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">snippets</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.profile.MySnippetsApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve a complete list of all Snippets created by a user.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a User object against a User model via username (id).</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>jsonify a Query object to the Snippets database of all</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Snippet objects with field <code>addedBy</code> equal to the User</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>model's unique username.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>[{dict}]: JSON Flask Response</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>A complete list of Snippet objects, with all nested fields</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>dereferenced.</p></td>
        </tr>
    </tbody>
  </table>

<details class="note">
  <summary>Note</summary>
  <p>This endpoint is the primary endpoint for fetching User's
Snippets profile.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>resources/profile.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve a complete list of all Snippets created by a user.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a User object against a User model via username (id).</span>
<span class="sd">        jsonify a Query object to the Snippets database of all</span>
<span class="sd">        Snippet objects with field `addedBy` equal to the User</span>
<span class="sd">        model&#39;s unique username.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [{dict}]: JSON Flask Response</span>
<span class="sd">        A complete list of Snippet objects, with all nested fields</span>
<span class="sd">        dereferenced.</span>
<span class="sd">    Note:</span>
<span class="sd">        This endpoint is the primary endpoint for fetching User&#39;s</span>
<span class="sd">        Snippets profile.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="nb">id</span><span class="p">)</span>
    <span class="n">snippets</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">addedBy</span><span class="o">=</span><span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;-addedOn&quot;</span><span class="p">)</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
            <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
            <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
            <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
            <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
            <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
            <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
            <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
            <span class="s2">&quot;score&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;score&quot;</span><span class="p">],</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))),</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">snippets</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.profile.MySnippetsOptionsApi" class="doc doc-heading">
        <code>MySnippetsOptionsApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the Snippet model to <code>api/users/&lt;user_id&gt;/snippets/options</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/profile.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MySnippetsOptionsApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the Snippet model to `api/users/&lt;user_id&gt;/snippets/options`&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve an array of all Snippets available to the user.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Identify a User object against a User model via username (user_id).</span>
<span class="sd">            jsonify a Query object to the Snippet database of all</span>
<span class="sd">            Snippet objects with field `addedBy` equal to the User</span>
<span class="sd">            model via unique username `user_id`, formatted as `options` in</span>
<span class="sd">            an HTML `select` element.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [{dict}]: JSON Flask Response</span>
<span class="sd">                array of Snippets with `label` and `value` keys for `Select` UI.</span>
<span class="sd">        Note:</span>
<span class="sd">            This key endpoint is what allows the frontend to present documents</span>
<span class="sd">            as creatable and/or multi-select options in an instant following live</span>
<span class="sd">            and/or recurrent updates and additions to a user&#39;s saved Snippets.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">snippets</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">addedBy</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))}</span>
            <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">snippets</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.profile.MySnippetsOptionsApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve an array of all Snippets available to the user.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>Identify a User object against a User model via username (user_id).</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>jsonify a Query object to the Snippet database of all</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Snippet objects with field <code>addedBy</code> equal to the User</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>model via unique username <code>user_id</code>, formatted as <code>options</code> in</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>an HTML <code>select</code> element.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>[{dict}]: JSON Flask Response
array of Snippets with <code>label</code> and <code>value</code> keys for <code>Select</code> UI.</p></td>
        </tr>
    </tbody>
  </table>

<details class="note">
  <summary>Note</summary>
  <p>This key endpoint is what allows the frontend to present documents
as creatable and/or multi-select options in an instant following live
and/or recurrent updates and additions to a user's saved Snippets.</p>
</details>
      <details class="quote">
        <summary>Source code in <code>resources/profile.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">user_id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve an array of all Snippets available to the user.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Identify a User object against a User model via username (user_id).</span>
<span class="sd">        jsonify a Query object to the Snippet database of all</span>
<span class="sd">        Snippet objects with field `addedBy` equal to the User</span>
<span class="sd">        model via unique username `user_id`, formatted as `options` in</span>
<span class="sd">        an HTML `select` element.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [{dict}]: JSON Flask Response</span>
<span class="sd">            array of Snippets with `label` and `value` keys for `Select` UI.</span>
<span class="sd">    Note:</span>
<span class="sd">        This key endpoint is what allows the frontend to present documents</span>
<span class="sd">        as creatable and/or multi-select options in an instant following live</span>
<span class="sd">        and/or recurrent updates and additions to a user&#39;s saved Snippets.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
    <span class="n">snippets</span> <span class="o">=</span> <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">addedBy</span><span class="o">=</span><span class="n">user</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))}</span>
        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">snippets</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="resources.user"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="resources.user.UserApi" class="doc doc-heading">
        <code>UserApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the User model to <code>api/users/&lt;id&gt;</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/user.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UserApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the User model to `api/users/&lt;id&gt;`&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a user object with username matching id.&quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="nb">id</span><span class="p">):</span>
                <span class="n">user</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;online&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;online&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;snippets_created&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span>
                                <span class="s2">&quot;snippet_title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;snippet_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                            <span class="p">}</span>
                            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets_created&quot;</span><span class="p">]</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;snippets_liked&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span>
                                <span class="s2">&quot;snippet_title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;snippet_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                            <span class="p">}</span>
                            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets_liked&quot;</span><span class="p">]</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;collections&quot;</span><span class="p">:</span> <span class="p">[</span>
                            <span class="p">{</span>
                                <span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                                <span class="s2">&quot;collection_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                            <span class="p">}</span>
                            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;collections&quot;</span><span class="p">]</span>
                        <span class="p">],</span>
                    <span class="p">}</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

        <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">UserNotExistsError</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InternalServerError</span>

    <span class="nd">@jwt_required</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update one User object with a matching id.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Schema validation errors.</span>
<span class="sd">            If required fields are missing.</span>
<span class="sd">        Returns: {dict}</span>
<span class="sd">            JSON Flask Response, 200</span>
<span class="sd">                else: Notifies the frontend with status code and message.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
            <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">body</span><span class="p">)</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Profile updated&quot;</span><span class="p">},</span> <span class="mi">200</span>
        <span class="k">except</span> <span class="n">InvalidQueryError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SchemaValidationError</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InternalServerError</span>

    <span class="nd">@jwt_required</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete one User object with a matching id.</span>

<span class="sd">        Returns: {dict}</span>
<span class="sd">            JSON Flask Response, 200</span>
<span class="sd">                with status message.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
            <span class="n">user</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;User deleted&quot;</span><span class="p">},</span> <span class="mi">200</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.user.UserApi.delete" class="doc doc-heading">
<code class="highlight language-python"><span class="n">delete</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Delete one User object with a matching id.</p>

  <p><strong>{dict}</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>JSON Flask Response, 200
with status message.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/user.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete one User object with a matching id.</span>

<span class="sd">    Returns: {dict}</span>
<span class="sd">        JSON Flask Response, 200</span>
<span class="sd">            with status message.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
        <span class="n">user</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;User deleted&quot;</span><span class="p">},</span> <span class="mi">200</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="resources.user.UserApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns a user object with username matching id.</p>

      <details class="quote">
        <summary>Source code in <code>resources/user.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a user object with username matching id.&quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">user</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="nb">id</span><span class="p">):</span>
            <span class="n">user</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;online&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;online&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;snippets_created&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;snippet_title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;snippet_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="p">}</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets_created&quot;</span><span class="p">]</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;snippets_liked&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;snippet_title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;snippet_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="p">}</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets_liked&quot;</span><span class="p">]</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;collections&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;collection_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="p">}</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;collections&quot;</span><span class="p">]</span>
                    <span class="p">],</span>
                <span class="p">}</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>

    <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">UserNotExistsError</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h3 id="resources.user.UserApi.put" class="doc doc-heading">
<code class="highlight language-python"><span class="n">put</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Update one User object with a matching id.</p>

  <p><strong>{dict}</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>JSON Flask Response, 200
else: Notifies the frontend with status code and message.</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/user.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jwt_required</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">put</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Update one User object with a matching id.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Schema validation errors.</span>
<span class="sd">        If required fields are missing.</span>
<span class="sd">    Returns: {dict}</span>
<span class="sd">        JSON Flask Response, 200</span>
<span class="sd">            else: Notifies the frontend with status code and message.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">user_id</span> <span class="o">=</span> <span class="n">get_jwt_identity</span><span class="p">()</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
        <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="o">**</span><span class="n">body</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;message&quot;</span><span class="p">:</span> <span class="s2">&quot;Profile updated&quot;</span><span class="p">},</span> <span class="mi">200</span>
    <span class="k">except</span> <span class="n">InvalidQueryError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SchemaValidationError</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.user.UsersApi" class="doc doc-heading">
        <code>UsersApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Requests against the User model to <code>api/users</code></p>


        <details class="quote">
          <summary>Source code in <code>resources/user.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UsersApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Requests against the User model to `api/users`&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns an array of all User objects.&quot;&quot;&quot;</span>

        <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="p">():</span>
            <span class="n">users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]),</span>
                    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;online&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;online&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;snippets_created&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;snippet_title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;snippet_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="p">}</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets_created&quot;</span><span class="p">]</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;snippets_liked&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;snippet_title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;snippet_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="p">}</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets_liked&quot;</span><span class="p">]</span>
                    <span class="p">],</span>
                    <span class="s2">&quot;collections&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;collection_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="p">}</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;collections&quot;</span><span class="p">]</span>
                    <span class="p">],</span>
                <span class="p">}</span>
            <span class="p">)</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.user.UsersApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Returns an array of all User objects.</p>

      <details class="quote">
        <summary>Source code in <code>resources/user.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns an array of all User objects.&quot;&quot;&quot;</span>

    <span class="n">users</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="p">():</span>
        <span class="n">users</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">doc</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]),</span>
                <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                <span class="s2">&quot;online&quot;</span><span class="p">:</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;online&quot;</span><span class="p">],</span>
                <span class="s2">&quot;snippets_created&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;snippet_title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;snippet_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="p">}</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets_created&quot;</span><span class="p">]</span>
                <span class="p">],</span>
                <span class="s2">&quot;snippets_liked&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;snippet_title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;snippet_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="p">}</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;snippets_liked&quot;</span><span class="p">]</span>
                <span class="p">],</span>
                <span class="s2">&quot;collections&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;collection_name&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;collection_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                    <span class="p">}</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">[</span><span class="s2">&quot;collections&quot;</span><span class="p">]</span>
                <span class="p">],</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="resources.reset_password"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="resources.reset_password.ForgotPassword" class="doc doc-heading">
        <code>ForgotPassword</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>This class is a subclass of the Resource class, and it's used to handle the forgot password functionality.</p>


        <details class="quote">
          <summary>Source code in <code>resources/reset_password.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ForgotPassword</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class is a subclass of the Resource class, and it&#39;s used to handle the forgot password functionality.&quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The post function is used to send an email with a link that will allow the user to reset their password.</span>
<span class="sd">        The function takes in an email and checks if it exists in the database. If it does, then a token is generated</span>
<span class="sd">        and sent to the user&#39;s email address along with instructions on how to reset their password.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: Reference the current instance of the class</span>

<span class="sd">        Returns:</span>
<span class="sd">            A response with a message that the email was sent</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">host_url</span> <span class="o">+</span> <span class="s2">&quot;reset/&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
            <span class="n">email</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">email</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SchemaValidationError</span>

            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">EmailDoesNotExistError</span>

            <span class="n">expires</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
            <span class="n">reset_token</span> <span class="o">=</span> <span class="n">create_access_token</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="n">expires_delta</span><span class="o">=</span><span class="n">expires</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">send_email</span><span class="p">(</span>
                <span class="s2">&quot;[Cheat-hub] Reset Your Password&quot;</span><span class="p">,</span>
                <span class="n">sender</span><span class="o">=</span><span class="s2">&quot;israelias.js@gmail.com&quot;</span><span class="p">,</span>
                <span class="n">recipients</span><span class="o">=</span><span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">],</span>
                <span class="n">text_body</span><span class="o">=</span><span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;reset_password.txt&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span> <span class="o">+</span> <span class="n">reset_token</span><span class="p">),</span>
                <span class="n">html_body</span><span class="o">=</span><span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;reset_password.html&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span> <span class="o">+</span> <span class="n">reset_token</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="n">SchemaValidationError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SchemaValidationError</span>
        <span class="k">except</span> <span class="n">EmailDoesNotExistError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">EmailDoesNotExistError</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.reset_password.ForgotPassword.post" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post</span><span class="p">()</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


  <div class="doc doc-contents ">
  
      <p>The post function is used to send an email with a link that will allow the user to reset their password.
The function takes in an email and checks if it exists in the database. If it does, then a token is generated
and sent to the user's email address along with instructions on how to reset their password.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>self</code></td>
          <td>
          </td>
          <td><p>Reference the current instance of the class</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>A response with a message that the email was sent</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/reset_password.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The post function is used to send an email with a link that will allow the user to reset their password.</span>
<span class="sd">    The function takes in an email and checks if it exists in the database. If it does, then a token is generated</span>
<span class="sd">    and sent to the user&#39;s email address along with instructions on how to reset their password.</span>

<span class="sd">    Args:</span>
<span class="sd">        self: Reference the current instance of the class</span>

<span class="sd">    Returns:</span>
<span class="sd">        A response with a message that the email was sent</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">url</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">host_url</span> <span class="o">+</span> <span class="s2">&quot;reset/&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
        <span class="n">email</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;email&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">email</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SchemaValidationError</span>

        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">EmailDoesNotExistError</span>

        <span class="n">expires</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
        <span class="n">reset_token</span> <span class="o">=</span> <span class="n">create_access_token</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">),</span> <span class="n">expires_delta</span><span class="o">=</span><span class="n">expires</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">send_email</span><span class="p">(</span>
            <span class="s2">&quot;[Cheat-hub] Reset Your Password&quot;</span><span class="p">,</span>
            <span class="n">sender</span><span class="o">=</span><span class="s2">&quot;israelias.js@gmail.com&quot;</span><span class="p">,</span>
            <span class="n">recipients</span><span class="o">=</span><span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">],</span>
            <span class="n">text_body</span><span class="o">=</span><span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;reset_password.txt&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span> <span class="o">+</span> <span class="n">reset_token</span><span class="p">),</span>
            <span class="n">html_body</span><span class="o">=</span><span class="n">render_template</span><span class="p">(</span><span class="s2">&quot;reset_password.html&quot;</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">url</span> <span class="o">+</span> <span class="n">reset_token</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="n">SchemaValidationError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SchemaValidationError</span>
    <span class="k">except</span> <span class="n">EmailDoesNotExistError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">EmailDoesNotExistError</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="resources.reset_password.ResetPassword" class="doc doc-heading">
        <code>ResetPassword</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>This class is a subclass of the Resource class from the Flask-RESTful library. It has a post method that takes in a JSON
object with a username and password. It then checks if the username is in the database and if it is, it updates the
password.</p>


        <details class="quote">
          <summary>Source code in <code>resources/reset_password.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ResetPassword</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class is a subclass of the Resource class from the Flask-RESTful library. It has a post method that takes in a JSON</span>
<span class="sd">    object with a username and password. It then checks if the username is in the database and if it is, it updates the</span>
<span class="sd">    password.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The post function is used to reset a user&#39;s password. It takes in the</span>
<span class="sd">        reset_token and password from the request body, and then checks if they are</span>
<span class="sd">        valid. If they are valid, it will update the user&#39;s password in MongoDB.</span>

<span class="sd">        Args:</span>
<span class="sd">            self: Reference the current instance of the class</span>

<span class="sd">        Returns:</span>
<span class="sd">            A message that password reset was successful</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">host_url</span> <span class="o">+</span> <span class="s2">&quot;reset/&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
            <span class="n">reset_token</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;reset_token&quot;</span><span class="p">)</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">reset_token</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">SchemaValidationError</span>

            <span class="n">user_id</span> <span class="o">=</span> <span class="n">decode_token</span><span class="p">(</span><span class="n">reset_token</span><span class="p">)[</span><span class="s2">&quot;sub&quot;</span><span class="p">]</span>
            <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>

            <span class="n">user</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
            <span class="n">user</span><span class="o">.</span><span class="n">hash_password</span><span class="p">()</span>
            <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

            <span class="k">return</span> <span class="n">send_email</span><span class="p">(</span>
                <span class="s2">&quot;[Cheat-hub] Password reset successful&quot;</span><span class="p">,</span>
                <span class="n">sender</span><span class="o">=</span><span class="s2">&quot;support@cheat-hub.com&quot;</span><span class="p">,</span>
                <span class="n">recipients</span><span class="o">=</span><span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">],</span>
                <span class="n">text_body</span><span class="o">=</span><span class="s2">&quot;Password reset was successful&quot;</span><span class="p">,</span>
                <span class="n">html_body</span><span class="o">=</span><span class="s2">&quot;&lt;p&gt;Password reset was successful&lt;/p&gt;&quot;</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="n">SchemaValidationError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SchemaValidationError</span>
        <span class="k">except</span> <span class="n">ExpiredSignatureError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ExpiredTokenError</span>
        <span class="k">except</span> <span class="p">(</span><span class="n">DecodeError</span><span class="p">,</span> <span class="n">InvalidTokenError</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">BadTokenError</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.reset_password.ResetPassword.post" class="doc doc-heading">
<code class="highlight language-python"><span class="n">post</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>The post function is used to reset a user's password. It takes in the
reset_token and password from the request body, and then checks if they are
valid. If they are valid, it will update the user's password in MongoDB.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>self</code></td>
          <td>
          </td>
          <td><p>Reference the current instance of the class</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>A message that password reset was successful</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/reset_password.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The post function is used to reset a user&#39;s password. It takes in the</span>
<span class="sd">    reset_token and password from the request body, and then checks if they are</span>
<span class="sd">    valid. If they are valid, it will update the user&#39;s password in MongoDB.</span>

<span class="sd">    Args:</span>
<span class="sd">        self: Reference the current instance of the class</span>

<span class="sd">    Returns:</span>
<span class="sd">        A message that password reset was successful</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">url</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">host_url</span> <span class="o">+</span> <span class="s2">&quot;reset/&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">get_json</span><span class="p">()</span>
        <span class="n">reset_token</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;reset_token&quot;</span><span class="p">)</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">body</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;password&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">reset_token</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SchemaValidationError</span>

        <span class="n">user_id</span> <span class="o">=</span> <span class="n">decode_token</span><span class="p">(</span><span class="n">reset_token</span><span class="p">)[</span><span class="s2">&quot;sub&quot;</span><span class="p">]</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>

        <span class="n">user</span><span class="o">.</span><span class="n">modify</span><span class="p">(</span><span class="n">password</span><span class="o">=</span><span class="n">password</span><span class="p">)</span>
        <span class="n">user</span><span class="o">.</span><span class="n">hash_password</span><span class="p">()</span>
        <span class="n">user</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">send_email</span><span class="p">(</span>
            <span class="s2">&quot;[Cheat-hub] Password reset successful&quot;</span><span class="p">,</span>
            <span class="n">sender</span><span class="o">=</span><span class="s2">&quot;support@cheat-hub.com&quot;</span><span class="p">,</span>
            <span class="n">recipients</span><span class="o">=</span><span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">],</span>
            <span class="n">text_body</span><span class="o">=</span><span class="s2">&quot;Password reset was successful&quot;</span><span class="p">,</span>
            <span class="n">html_body</span><span class="o">=</span><span class="s2">&quot;&lt;p&gt;Password reset was successful&lt;/p&gt;&quot;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">except</span> <span class="n">SchemaValidationError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SchemaValidationError</span>
    <span class="k">except</span> <span class="n">ExpiredSignatureError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ExpiredTokenError</span>
    <span class="k">except</span> <span class="p">(</span><span class="n">DecodeError</span><span class="p">,</span> <span class="n">InvalidTokenError</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">BadTokenError</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="resources.tags"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="resources.tags.TagsApi" class="doc doc-heading">
        <code>TagsApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Prepares all selectable tags: api/tags.</p>


        <details class="quote">
          <summary>Source code in <code>resources/tags.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">TagsApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Prepares all selectable tags: api/tags.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve a all current tags.&quot;&quot;&quot;</span>

        <span class="n">all_tags_arr</span> <span class="o">=</span> <span class="n">all_tags</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">jsonify</span><span class="p">([{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">}</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">all_tags_arr</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.tags.TagsApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve a all current tags.</p>

      <details class="quote">
        <summary>Source code in <code>resources/tags.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve a all current tags.&quot;&quot;&quot;</span>

    <span class="n">all_tags_arr</span> <span class="o">=</span> <span class="n">all_tags</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">jsonify</span><span class="p">([{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">tag</span><span class="p">}</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">all_tags_arr</span><span class="p">])</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>

<div class="doc doc-object doc-module">


<a id="resources.search"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="resources.search.SearchApi" class="doc doc-heading">
        <code>SearchApi</code>


</h2>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="flask_restful.Resource">Resource</span></code></p>

  
      <p>Handles query, language and tag params in URL search endpoint: api/search.</p>


        <details class="quote">
          <summary>Source code in <code>resources/search.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SearchApi</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Handles query, language and tag params in URL search endpoint: api/search.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Retrieve a paginated list of public snippets.</span>

<span class="sd">        Yields:</span>
<span class="sd">            `/api/search?`</span>
<span class="sd">            The base url.</span>
<span class="sd">            The URL string should follow this order:</span>

<span class="sd">            `query=hello%20world`</span>
<span class="sd">            Search query is required.</span>
<span class="sd">            The following params [language, tags, page] are optional, and are there to narrow the search.</span>

<span class="sd">            `&amp;language=python`</span>
<span class="sd">            Language query hones search query down to a language.</span>
<span class="sd">            Frontend can call {language=a}</span>
<span class="sd">            If empty, params for search query will prevail, and all languages will return.</span>

<span class="sd">            `tags=javascript&amp;tags=jquery`</span>
<span class="sd">            Tags query appends to a list.</span>
<span class="sd">            Frontend can append {tags=a&amp;tags=b&amp;tags=c} multiple times, and the parser will parse:</span>
<span class="sd">            [a, b, c]</span>

<span class="sd">            ` &amp;page=1`</span>
<span class="sd">            Page param will be available authomatically.</span>

<span class="sd">        Raises:</span>
<span class="sd">            SnippetNotExistsError: The Snippet does not exist.</span>
<span class="sd">            InternalServerError: Server error.</span>

<span class="sd">        Returns:</span>
<span class="sd">            [{dict}]: JSON Flask Response</span>
<span class="sd">                array of Snippets that match a query</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">search_request</span> <span class="o">=</span> <span class="n">search_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
            <span class="n">search</span> <span class="o">=</span> <span class="n">search_request</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span>

            <span class="n">language_request</span> <span class="o">=</span> <span class="n">language_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
            <span class="n">language</span> <span class="o">=</span> <span class="n">language_request</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">]</span>

            <span class="n">tag_request</span> <span class="o">=</span> <span class="n">tag_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="n">tag_request</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span>

            <span class="n">page_request</span> <span class="o">=</span> <span class="n">pagination_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
            <span class="n">page</span> <span class="o">=</span> <span class="n">page_request</span><span class="p">[</span><span class="s2">&quot;page&quot;</span><span class="p">]</span>
            <span class="n">per_page</span> <span class="o">=</span> <span class="n">page_request</span><span class="p">[</span><span class="s2">&quot;per_page&quot;</span><span class="p">]</span>

            <span class="n">all_langs_arr</span> <span class="o">=</span> <span class="n">all_languages</span><span class="p">()</span>
            <span class="n">all_tags_arr</span> <span class="o">=</span> <span class="n">all_tags</span><span class="p">()</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">search</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">query</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span>
                        <span class="n">language__in</span><span class="o">=</span><span class="p">[</span><span class="n">language</span><span class="p">]</span> <span class="k">if</span> <span class="n">language</span> <span class="k">else</span> <span class="n">all_langs_arr</span><span class="p">,</span>
                        <span class="n">tags__in</span><span class="o">=</span><span class="n">tags</span> <span class="k">if</span> <span class="n">tags</span> <span class="k">else</span> <span class="n">all_tags_arr</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;-addedOn&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">paginate</span><span class="p">(</span>
                        <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">,</span>
                        <span class="n">per_page</span><span class="o">=</span><span class="n">per_page</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>
                <span class="n">links</span> <span class="o">=</span> <span class="n">pagination_links</span><span class="p">(</span>
                    <span class="n">query</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="s2">&quot;searchapi&quot;</span>
                <span class="p">)</span>
                <span class="n">resp</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="n">links</span><span class="p">,</span>
                    <span class="s2">&quot;has_prev&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">has_prev</span><span class="p">,</span>
                    <span class="s2">&quot;has_next&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">has_next</span><span class="p">,</span>
                    <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">page</span><span class="p">,</span>
                    <span class="s2">&quot;total_pages&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">pages</span><span class="p">,</span>
                    <span class="s2">&quot;items_per_page&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">per_page</span><span class="p">,</span>
                    <span class="s2">&quot;total_items&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
                    <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))),</span>
                        <span class="p">}</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">query</span><span class="o">.</span><span class="n">items</span>
                    <span class="p">],</span>
                <span class="p">}</span>

                <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>

            <span class="k">else</span><span class="p">:</span>

                <span class="n">query</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">search_text</span><span class="p">(</span><span class="n">search</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;-addedOn&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">paginate</span><span class="p">(</span>
                        <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">,</span>
                        <span class="n">per_page</span><span class="o">=</span><span class="n">per_page</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="p">)</span>

                <span class="n">meta</span> <span class="o">=</span> <span class="n">pagination_meta</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
                <span class="n">links</span> <span class="o">=</span> <span class="n">pagination_links</span><span class="p">(</span>
                    <span class="n">query</span><span class="p">,</span>
                    <span class="n">query</span><span class="o">=</span><span class="n">search</span><span class="p">,</span>
                    <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
                    <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
                    <span class="n">resource</span><span class="o">=</span><span class="s2">&quot;searchapi&quot;</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">resp</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="n">links</span><span class="p">,</span>
                    <span class="s2">&quot;has_prev&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">has_prev</span><span class="p">,</span>
                    <span class="s2">&quot;has_next&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">has_next</span><span class="p">,</span>
                    <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">page</span><span class="p">,</span>
                    <span class="s2">&quot;total_pages&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">pages</span><span class="p">,</span>
                    <span class="s2">&quot;items_per_page&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">per_page</span><span class="p">,</span>
                    <span class="s2">&quot;total_items&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
                    <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                            <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                            <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))),</span>
                        <span class="p">}</span>
                        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">query</span><span class="o">.</span><span class="n">items</span>
                    <span class="p">],</span>
                <span class="p">}</span>

            <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">SnippetNotExistsError</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">









<div class="doc doc-object doc-function">



<h3 id="resources.search.SearchApi.get" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>Retrieve a paginated list of public snippets.</p>

  <p><strong>Yields:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p><code>/api/search?</code></p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>The base url.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>The URL string should follow this order:</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p><code>query=hello%20world</code></p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Search query is required.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>The following params [language, tags, page] are optional, and are there to narrow the search.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p><code>&amp;language=python</code></p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Language query hones search query down to a language.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Frontend can call {language=a}</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>If empty, params for search query will prevail, and all languages will return.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p><code>tags=javascript&amp;tags=jquery</code></p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Tags query appends to a list.</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Frontend can append {tags=a&amp;tags=b&amp;tags=c} multiple times, and the parser will parse:</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>[a, b, c]</p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p><code>&amp;page=1</code></p></td>
        </tr>
        <tr>
          <td>
          </td>
          <td><p>Page param will be available authomatically.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Raises:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="resources.errors.SnippetNotExistsError" href="#resources.errors.SnippetNotExistsError">SnippetNotExistsError</a></code>
          </td>
          <td><p>The Snippet does not exist.</p></td>
        </tr>
        <tr>
          <td>
                <code><a class="autorefs autorefs-internal" title="resources.errors.InternalServerError" href="#resources.errors.InternalServerError">InternalServerError</a></code>
          </td>
          <td><p>Server error.</p></td>
        </tr>
    </tbody>
  </table>

  <p><strong>Returns:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td>
          </td>
          <td><p>[{dict}]: JSON Flask Response
array of Snippets that match a query</p></td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>resources/search.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retrieve a paginated list of public snippets.</span>

<span class="sd">    Yields:</span>
<span class="sd">        `/api/search?`</span>
<span class="sd">        The base url.</span>
<span class="sd">        The URL string should follow this order:</span>

<span class="sd">        `query=hello%20world`</span>
<span class="sd">        Search query is required.</span>
<span class="sd">        The following params [language, tags, page] are optional, and are there to narrow the search.</span>

<span class="sd">        `&amp;language=python`</span>
<span class="sd">        Language query hones search query down to a language.</span>
<span class="sd">        Frontend can call {language=a}</span>
<span class="sd">        If empty, params for search query will prevail, and all languages will return.</span>

<span class="sd">        `tags=javascript&amp;tags=jquery`</span>
<span class="sd">        Tags query appends to a list.</span>
<span class="sd">        Frontend can append {tags=a&amp;tags=b&amp;tags=c} multiple times, and the parser will parse:</span>
<span class="sd">        [a, b, c]</span>

<span class="sd">        ` &amp;page=1`</span>
<span class="sd">        Page param will be available authomatically.</span>

<span class="sd">    Raises:</span>
<span class="sd">        SnippetNotExistsError: The Snippet does not exist.</span>
<span class="sd">        InternalServerError: Server error.</span>

<span class="sd">    Returns:</span>
<span class="sd">        [{dict}]: JSON Flask Response</span>
<span class="sd">            array of Snippets that match a query</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">search_request</span> <span class="o">=</span> <span class="n">search_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">search</span> <span class="o">=</span> <span class="n">search_request</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span>

        <span class="n">language_request</span> <span class="o">=</span> <span class="n">language_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">language</span> <span class="o">=</span> <span class="n">language_request</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">]</span>

        <span class="n">tag_request</span> <span class="o">=</span> <span class="n">tag_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">tags</span> <span class="o">=</span> <span class="n">tag_request</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">]</span>

        <span class="n">page_request</span> <span class="o">=</span> <span class="n">pagination_parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">page_request</span><span class="p">[</span><span class="s2">&quot;page&quot;</span><span class="p">]</span>
        <span class="n">per_page</span> <span class="o">=</span> <span class="n">page_request</span><span class="p">[</span><span class="s2">&quot;per_page&quot;</span><span class="p">]</span>

        <span class="n">all_langs_arr</span> <span class="o">=</span> <span class="n">all_languages</span><span class="p">()</span>
        <span class="n">all_tags_arr</span> <span class="o">=</span> <span class="n">all_tags</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">search</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span>
                    <span class="n">language__in</span><span class="o">=</span><span class="p">[</span><span class="n">language</span><span class="p">]</span> <span class="k">if</span> <span class="n">language</span> <span class="k">else</span> <span class="n">all_langs_arr</span><span class="p">,</span>
                    <span class="n">tags__in</span><span class="o">=</span><span class="n">tags</span> <span class="k">if</span> <span class="n">tags</span> <span class="k">else</span> <span class="n">all_tags_arr</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;-addedOn&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">paginate</span><span class="p">(</span>
                    <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">,</span>
                    <span class="n">per_page</span><span class="o">=</span><span class="n">per_page</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">links</span> <span class="o">=</span> <span class="n">pagination_links</span><span class="p">(</span>
                <span class="n">query</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span> <span class="n">resource</span><span class="o">=</span><span class="s2">&quot;searchapi&quot;</span>
            <span class="p">)</span>
            <span class="n">resp</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="n">links</span><span class="p">,</span>
                <span class="s2">&quot;has_prev&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">has_prev</span><span class="p">,</span>
                <span class="s2">&quot;has_next&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">has_next</span><span class="p">,</span>
                <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">page</span><span class="p">,</span>
                <span class="s2">&quot;total_pages&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">pages</span><span class="p">,</span>
                <span class="s2">&quot;items_per_page&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">per_page</span><span class="p">,</span>
                <span class="s2">&quot;total_items&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
                <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                        <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))),</span>
                    <span class="p">}</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">query</span><span class="o">.</span><span class="n">items</span>
                <span class="p">],</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="n">query</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">Snippet</span><span class="o">.</span><span class="n">objects</span><span class="p">()</span>
                <span class="o">.</span><span class="n">search_text</span><span class="p">(</span><span class="n">search</span><span class="p">,</span> <span class="n">language</span><span class="o">=</span><span class="s2">&quot;en&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s2">&quot;-addedOn&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">paginate</span><span class="p">(</span>
                    <span class="n">page</span><span class="o">=</span><span class="n">page</span><span class="p">,</span>
                    <span class="n">per_page</span><span class="o">=</span><span class="n">per_page</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>

            <span class="n">meta</span> <span class="o">=</span> <span class="n">pagination_meta</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
            <span class="n">links</span> <span class="o">=</span> <span class="n">pagination_links</span><span class="p">(</span>
                <span class="n">query</span><span class="p">,</span>
                <span class="n">query</span><span class="o">=</span><span class="n">search</span><span class="p">,</span>
                <span class="n">language</span><span class="o">=</span><span class="n">language</span><span class="p">,</span>
                <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span>
                <span class="n">resource</span><span class="o">=</span><span class="s2">&quot;searchapi&quot;</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">resp</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;links&quot;</span><span class="p">:</span> <span class="n">links</span><span class="p">,</span>
                <span class="s2">&quot;has_prev&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">has_prev</span><span class="p">,</span>
                <span class="s2">&quot;has_next&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">has_next</span><span class="p">,</span>
                <span class="s2">&quot;page&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">page</span><span class="p">,</span>
                <span class="s2">&quot;total_pages&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">pages</span><span class="p">,</span>
                <span class="s2">&quot;items_per_page&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">per_page</span><span class="p">,</span>
                <span class="s2">&quot;total_items&quot;</span><span class="p">:</span> <span class="n">query</span><span class="o">.</span><span class="n">total</span><span class="p">,</span>
                <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;_id&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])),</span>
                        <span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;language&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;language&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;addedBy&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedBy&quot;</span><span class="p">][</span><span class="s2">&quot;username&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;likedBy&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">elem</span><span class="p">[</span><span class="s2">&quot;username&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;likedBy&quot;</span><span class="p">]],</span>
                        <span class="s2">&quot;tags&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;tags&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;addedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;addedOn&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;updatedOn&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;updatedOn&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;private&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;private&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;source&quot;</span><span class="p">:</span> <span class="n">k</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url_for</span><span class="p">(</span><span class="s2">&quot;snippetapi&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">ObjectId</span><span class="p">(</span><span class="n">k</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]))),</span>
                    <span class="p">}</span>
                    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">query</span><span class="o">.</span><span class="n">items</span>
                <span class="p">],</span>
            <span class="p">}</span>

        <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">resp</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">DoesNotExist</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">SnippetNotExistsError</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">InternalServerError</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>




  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../database/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Database" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Database
            </div>
          </div>
        </a>
      
      
        
        <a href="../services/" class="md-footer__link md-footer__link--next" aria-label="Next: Services" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Services
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>